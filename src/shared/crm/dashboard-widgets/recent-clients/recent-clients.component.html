<div class="wrapper">
    <header>
        <h2 class="title"><i class="icon-people"></i>{{ls.l('CRMDashboard_RecentClients')}}<span>{{ls.l('CRMDashboard_LastNClientsRecords', 'CRM',  [recordsCount])}}</span><a routerLink="/app/crm/clients">{{ls.l('CRMDashboard_SeeAllRecords')}} <i class="fa fa-angle-right"></i></a></h2>
    </header>

    <ng-container *ngIf="recentlyCreatedCustomers$ | async as recentlyCreatedCustomers">
        <div class="grid-wrapper" *ngIf="recentlyCreatedCustomers && recentlyCreatedCustomers.length; else noData">
            <dx-data-grid id="gridContainer" class="grid-compact-view"
                          [dataSource]="recentlyCreatedCustomers"
                          (onDataErrorOccurred)="httpInterceptor.handleError($event.error)"
                          (onCellClick)="onCellClick($event)">
                <dxi-column dataField="fullName" [caption]="ls.l('Customer.Name')"></dxi-column>
                <dxi-column dataField="creationTime" [caption]="ls.l('Created')" cellTemplate="dateCell" cssClass="tabular"></dxi-column>
                <div *dxTemplate="let cellData of 'dateCell'">
                    {{cellData.value | date: formatting.dateTime : userTimezone}}
                </div>
                <dxo-paging [pageSize]="10"></dxo-paging>
            </dx-data-grid>
        </div>
    </ng-container>
</div>

<ng-template #noData>
    <app-no-data [showLink]="false"></app-no-data>
</ng-template>
