<div class="header-section">
    <div class="buyer-protection">
        <img src="assets/images/credit-report/shield-icon.svg" alt="guard"><span class="buyer-protection-text">buyer protection</span>
    </div>
    <img src="assets/landing/payment-info.svg" alt="Payment Information Icon" class="step-icon" width="116">
    <div class="contact-info">
        <p>Call us toll Free at <a href="tel:800-55-7878" class="phone-number">800-55-7878</a></p>
        <p class="work-time">
            <span class="timezone">Phone Hours (Pacific Time)</span><br>
            <b class="work-schedule">Mon - Fri 7 AM - 5 pM</b>
        </p>
    </div>
</div>
<h2 class="step-title">{{ls.l("EnterPaymentInformation")}}</h2>
<div class="form payment">
    <dx-validation-group name="billingValidationGroup" (onInitialized)="initValidationGroup($event)">
        <div class="row">
            <div class="col">
                <div class="paymentType row">
                    <div class="col">
                        <input type="radio" name="paymentType" id="creditCard" value="creditCard"
                               [disabled]="!paymentAuthorizationRequired"
                               checked>
                        <label for="creditCard">
                            <img src="assets/landing/check-white.svg" alt="check" width="20"> {{ls.l("CreditCard")}}
                            <img src="assets/images/credit-report/card-icons.svg" alt="cards list" class="card-icons">
                        </label>
                    </div>
                    <div class="col d-none">
                        <input type="radio" name="paymentType" id="payPal" value="payPal" disabled>
                        <label for="payPal">
                            <img src="assets/landing/check.svg" alt="check"
                                 width="20"> PayPal
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="row fields">
            <div class="col">
                <div class="with-bg">
                    <div class="dx-field">
                        <div class="dx-field-value full-width">
                            <dx-text-box class="with-icon creditCardNumber"
                                         name="creditCardNumber"
                                         [disabled]="!paymentAuthorizationRequired"
                                         [placeholder]="ls.l('CreditCardNumber')"
                                         [maskInvalidMessage]="ls.l('CreditCardFormatError')"
                                         [(value)]="bankCard.cardNumber"
                                         (onFocusIn)="inputStatusesService.focusInput($event)"
                                         (onFocusOut)="inputStatusesService.blurInput($event)">
                                <dx-validator>
                                    <dxi-validation-rule type="required"
                                                         [message]="ls.l('CreditCardRequired')">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                    </div>
                    <div class="dx-field row">
                        <div class="col-sm-7">
                            <dx-text-box name="expirationDate"
                                         class="with-icon expDate"
                                         [disabled]="!paymentAuthorizationRequired"
                                         [placeholder]="ls.l('ExpirationDate')"
                                         [maskInvalidMessage]="ls.l('ExpirationDateFormatError')"
                                         [(value)]="expirationDate"
                                         (onFocusIn)="inputStatusesService.focusInput($event)"
                                         (onFocusOut)="inputStatusesService.blurInput($event)">
                                <dx-validator>
                                    <dxi-validation-rule type="required"
                                                         [message]="ls.l('ExpirationDateRequired')"></dxi-validation-rule>
                                    <dxi-validation-rule type="custom"
                                                         [validationCallback]="validateExpirationDate"
                                                         [message]="ls.l('ExpirationDateOutdated')"></dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                        <div class="col-sm-5">
                            <dx-text-box class="with-icon cvvCode"
                                         maxLength="4"
                                         [placeholder]="ls.l('CVV')"
                                         [maskInvalidMessage]="ls.l('CVVErrorLength')"
                                         maskChar=" "
                                         name="cvvCode"
                                         [disabled]="!paymentAuthorizationRequired"
                                         [(value)]="bankCard.cvv"
                                         (onFocusIn)="inputStatusesService.focusInput($event)"
                                         (onFocusOut)="inputStatusesService.blurInput($event)">
                                <dx-validator>
                                    <dxi-validation-rule type="required"
                                                         [message]="ls.l('CVVRequired')"></dxi-validation-rule>
                                    <dxi-validation-rule type="stringLength" [min]="3"
                                                         [message]="ls.l('CVVErrorLength')"></dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="dx-fieldset with-bg">
                    <div class="row dx-field">
                        <div class="col-sm-12 with-icon fullAddress">
                            <input *ngIf="!googleAutoComplete"
                                   type="text"
                                   name="Address"
                                   [placeholder]="ls.l('AddressPlaceholder')"
                                   [(ngModel)]="bankCard.billingAddress"
                                   class="dx-texteditor-input"
                                   [disabled]="!paymentAuthorizationRequired" />
                            <input *ngIf="googleAutoComplete"
                                   #addressInput
                                   type="text"
                                   name="Address"
                                   [placeholder]="ls.l('AddressPlaceholder')"
                                   [(ngModel)]="bankCard.billingAddress"
                                   class="dx-texteditor-input"
                                   [options]="options"
                                   [disabled]="!paymentAuthorizationRequired"
                                   (onAddressChange)="onAddressChanged($event)"
                                   ngx-google-places-autocomplete />
                        </div>
                    </div>
                    <div class="dx-field row">
                        <div class="col-sm-5">
                            <dx-text-box name="city"
                                         [disabled]="!paymentAuthorizationRequired"
                                         maxLength="50"
                                         [placeholder]="ls.l('City')"
                                         [(value)]="bankCard.billingCity">
                                <dx-validator>
                                    <dxi-validation-rule type="required"
                                                         [message]="ls.l('CityRequired')">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                        <div class="col-sm-3">
                            <dx-select-box [acceptCustomValue]="true"
                                           [dataSource]="getCountryStates() | async"
                                           displayExpr="code"
                                           valueExpr="name"
                                           name="billingStateName"
                                           placeholder="''"
                                           [disabled]="!paymentAuthorizationRequired"
                                           [searchEnabled]="true"
                                           [(value)]="bankCard.billingState"
                                           fieldTemplate="field"
                                           (onCustomItemCreating)="onCustomStateCreate($event)">
                                <div *dxTemplate="let data of 'field'">
                                    <div class="custom-item">
                                        <dx-text-box class="state"
                                                     [value]="data?.name"
                                                     placeholder="State">
                                        </dx-text-box>
                                    </div>
                                </div>
                                <dx-validator>
                                    <dxi-validation-rule type="required"
                                                         [message]="ls.l('StateRequired')"></dxi-validation-rule>
                                </dx-validator>
                            </dx-select-box>
                        </div>
                        <div class="col-sm-4">
                            <dx-text-box name="zipCode"
                                         class="with-icon zipCode"
                                         [disabled]="!paymentAuthorizationRequired"
                                         maxLength="5"
                                         [placeholder]="ls.l('Zipcode')"
                                         [maskInvalidMessage]="ls.l('ZipcodeFormatError')"
                                         [(value)]="bankCard.billingZip"
                                         (onFocusIn)="inputStatusesService.focusInput($event)"
                                         (onFocusOut)="inputStatusesService.blurInput($event)">
                                <dx-validator>
                                    <dxi-validation-rule type="required"
                                                         [message]="ls.l('ZipIsRequired')"></dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row ">
            <div class="col">
                <dx-check-box id="discloseMyEmail"
                              [disabled]="!paymentAuthorizationRequired"
                              [value]="false"
                              [text]="ls.l('AgreeToUpdate')"
                              validationMessageMode="auto">
                    <dx-validator>
                        <dxi-validation-rule type="required"
                                             [message]="ls.l('AgreeToUpdateError')"></dxi-validation-rule>
                    </dx-validator>
                </dx-check-box>
            </div>
            <div class="col">
                <div class="agreements">
                    {{ls.l("ByContinueIAgree")}} <a (click)="openConditionsDialog(conditions.Terms)" [title]="ls.l('TermsOfService')">{{ls.l("TermsOfService")}}</a>
                    {{ls.l("And")}} <a (click)="openConditionsDialog(conditions.Policies)" [title]="ls.l('PrivacyPolicy')">{{ls.l("PrivacyPolicy")}}</a>
                </div>
            </div>
        </div>
        <dx-validation-summary class="summary"></dx-validation-summary>
    </dx-validation-group>
</div>
