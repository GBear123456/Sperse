<div class="left">
    <h3>{{ ls.l('Progress') }}</h3>
    <dx-scroll-view [height]="650">
        <ul>
            <li *ngFor="let step of visibleSteps; let i = index"
                [ngClass]="{
                    selected: i === stepper.selectedIndex,
                    saved: step.saved
                }"
                (click)="stepClick(i)">
                <div class="icon-container">
                    <img [ngClass]="step.name" src="assets/common/icons/tenant-settings/{{ step.name }}.svg">
                </div>
                <span>{{ step.text }}</span>
            </li>
        </ul>
    </dx-scroll-view>
</div>
<div class="right">
    <mat-vertical-stepper #stepper>
        <mat-step *ngIf="showTimezoneSelection" #generalSettingsStep>
            <ng-container *ngIf="stepper.selected === null || stepper.selected === generalSettingsStep">
                <general-settings [settings]="generalSettings$ | async" (onOptionChanged)="onOptionChanged($event)"></general-settings>
            </ng-container>
        </mat-step>
        <mat-step *ngIf="!appService.isHostTenant && hasCustomizationsFeture" #appearanceStep>
            <dx-scroll-view [height]="529">
                <appearance (onOptionChanged)="onOptionChanged($event)"></appearance>
            </dx-scroll-view>
        </mat-step>
        <mat-step *ngIf="hasHostPermission" #tenantManagementStep>
            <ng-container *ngIf="stepper.selected === tenantManagementStep">
                <tenant-management [settings]="tenantManagementSettings$ | async"
                                   [editions]="editions$ | async">
                </tenant-management>
            </ng-container>
        </mat-step>
        <mat-step #userManagementStep>
            <ng-container *ngIf="stepper.selected === userManagementStep">
                <dx-scroll-view [height]="529">
                    <user-management [hostSettings]="hostUserManagementSettings$ | async"
                                     [tenantSettings]="tenantUserManagementSettings$ | async"
                                     (onOptionChanged)="onOptionChanged($event)">
                    </user-management>
                </dx-scroll-view>
            </ng-container>
        </mat-step>
        <mat-step #securityStep>
            <ng-container *ngIf="stepper.selected === securityStep">
                <security [securitySettings]="securitySettings$ | async">
                </security>
            </ng-container>
        </mat-step>
        <mat-step #emailStep>
            <ng-container *ngIf="stepper.selected === emailStep">
                <email [settings]="emailSettings$ | async"></email>
            </ng-container>
        </mat-step>
        <mat-step #gmailStep>
            <ng-container *ngIf="stepper.selected === gmailStep">
                <gmail-settings></gmail-settings>
            </ng-container>
        </mat-step>
        <mat-step *ngIf="!appService.isHostTenant && hasCustomizationsFeture" #memberPortalStep>
            <member-portal></member-portal>
        </mat-step>
        <mat-step *ngIf="showInvoiceSettings" #invoiceStep>
            <ng-container *ngIf="stepper.selected === invoiceStep">
                <invoice-settings></invoice-settings>
            </ng-container>
        </mat-step>
        <mat-step *ngIf="showCommissionsSettings" #commissionsStep>
            <ng-container *ngIf="stepper.selected === commissionsStep">
                <commissions-settings></commissions-settings>
            </ng-container>
        </mat-step>
        <mat-step *ngIf="showBankTransferSettings" #bankTransferStep>
            <ng-container *ngIf="stepper.selected === bankTransferStep">
                <bank-transfer></bank-transfer>
            </ng-container>
        </mat-step>
        <mat-step *ngIf="showOtherSettings" #otherStep>
            <ng-container *ngIf="stepper.selected === otherStep">
                <other-settings></other-settings>
            </ng-container>
        </mat-step>
        <mat-step *ngIf="showLandingPageSettings" #landingPageStep>
            <ng-container *ngIf="stepper.selected === landingPageStep">
                <landing-page></landing-page>
            </ng-container>
        </mat-step>
    </mat-vertical-stepper>
    <div mat-dialog-actions>
        <button mat-button class="skip" (click)="next()">{{ ls.l('SkipForNow') }}</button>
        <button [hidden]="stepper.selectedIndex === 0"
                class="btn btn-default back"
                (click)="back()">
            {{ ls.l('Back') }}
        </button>
        <button class="btn btn-layout next" (click)="saveAndNext()">{{ ls.l('SaveAndNext') }}</button>
    </div>
</div>