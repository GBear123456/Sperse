<div class="title">
    <h1>Cash Flow Statement and Forecast
        <synch-progress class="synch-progress" (onComplete)="refreshDataGrid()"></synch-progress>
    </h1>
    <button class="add-new">+ Add new</button>
</div>
<cashflow-operations (refreshCashflow)="refreshDataGrid($event)"></cashflow-operations>

<div class="cashflow">
    <div class="groupBy">
        <span>Group by</span>
        <dx-select-box
                [items]="groupbyItems"
                [value]="groupbyItems[0]"
                displayExpr="optionText"
                accessKey="cashflowGroupby"
                #selectBox
                (onValueChanged)="changeGroupBy($event)"
        >
        </dx-select-box>
    </div>

    <dx-pivot-grid id="operations"
                   [allowSortingBySummary]="true"
                   [allowSorting]="false"
                   [allowFiltering]="true"
                   [allowExpandAll]="false"
                   [showBorders]="false"
                   [(dataSource)]="dataSource"
                   [rowHeaderLayout]="'tree'"
                   [showColumnGrandTotals]="false"
                   [texts] = "{'grandTotal': 'ENDING CASH POSITION', 'total': '{0}'}"
                   [fieldChooser]="false"
                   [export]="{'enabled': false}"
                   (onCellPrepared)="onCellPrepared($event)"
                   (onContentReady)="onContentReady($event)"
                   (onCellClick)="onCellClick($event)"
    >
    </dx-pivot-grid>

    <ng-container *ngIf="statsDetailResult !== 'undefined'">
        <dx-data-grid id="gridContainer"
                      [dataSource]="statsDetailResult">

            <dxi-column dataField="date" width="130" dataType="date" format="shortDate"></dxi-column>
            <dxi-column dataField="description"></dxi-column>
            <dxi-column dataField="debit" width="110" format="currency"></dxi-column>
            <dxi-column dataField="credit" width="110" format="currency"></dxi-column>
            <dxi-column dataField="comments"></dxi-column>

            <dxo-load-panel [enabled]="true"></dxo-load-panel>
            <dxo-scrolling mode="virtual"></dxo-scrolling>
        </dx-data-grid>
    </ng-container>
</div>
