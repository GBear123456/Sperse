<app-headline [names]="[ l('SetupStep_Permissions') ]"
              iconSrc="assets/common/icons/user-permissions.svg"
              [showReloadButton]="ui.showReload"
              [showToggleLeftMenuButton]="true"
              [showStateResetButton]="true"
              (onStateReset)="dataGrid.instance.state(null)"
              (onReload)="onRefresh()">
    <synch-progress class="synch-progress"></synch-progress>
</app-headline>
<div class="content-wrap">
    <cfo-left-menu [selectedItemIndex]="4"></cfo-left-menu>
    <div class="frame-wrap">
        <ghost-list [hidden]="isDataLoaded"></ghost-list>
        <dx-data-grid
            [hidden]="isDataLoaded && (!dataSource || (dataSource && !dataSource.totalCount()))"
            [dataSource]="dataSource"
            [pager]="defaultGridPagerConfig"
            [customizeColumns]="customizeColumns"
            [rowAlternationEnabled]="true"
            [showColumnLines]="false"
            [loadPanel]="{ enabled: false }"
            [showRowLines]="false"
            noDataText=""
            width="100%"
            height="calc(100vh - 180px)"
            (onCellHoverChanged)="onCellHoverChanged($event)"
            (onCellClick)="onCellClick($event)"
            (onRowUpdating)="onRowUpdating($event)">
            <dxo-editing [allowUpdating]="true" mode="cell"></dxo-editing>
            <dxo-scrolling rowRenderingMode="virtual"></dxo-scrolling>
            <div *dxTemplate="let data of 'addUserTemplate'">
                <img class="addUserButton" (click)="showUsersPopup($event)" src="./assets/common/icons/add-user-icon.svg" [alt]="l('UserPermissions_AddUser')">
            </div>
        </dx-data-grid>
        <app-no-data
            [hidden]="!isDataLoaded || (isDataLoaded && dataSource && dataSource.totalCount())"
            [showLink]="false">
        </app-no-data>
    </div>
</div>
