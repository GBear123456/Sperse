<div>
    <app-headline [config]="headlineConfig">
        <selection-filter class="headline"
            [allItemsText]="l('All_Entities')"
            [title]=""
            popupWidth="280px"
            [selectionList]="bankAccountsService.businessEntities$ | async"
            [selectedItems]="bankAccountsService.selectedBusinessEntitiesIds$ | async"
            (selectionChanged)="bankAccountsService.changeState({selectedBusinessEntitiesIds: $event}, true)"
            (onClosed)="invalidate()">
        </selection-filter>
        <synch-progress class="synch-progress"></synch-progress>
    </app-headline>
    <div class="main-wrapper">
        <div class="left-menu">
            <ul class="menu-wrapper">
                <ng-template ngFor let-item [ngForOf]="menuItems" let-i="index">
                    <li class="item">
                        <span class="link {{selectedPeriod == item.period ? 'selected' : ''}}" (click)="onMenuClick(item)">{{l(item.caption)}}</span>
                    </li>
                </ng-template>
            </ul>
        </div>

        <div class="reports">
            <dx-data-grid id="gridContainer"
                        height="100%"
                        [dataSource]="dataSource"
                        [allowColumnReordering]="true"
                        [columnAutoWidth]="true"
                        [allowColumnResizing]="true"
                        [hoverStateEnabled]="true"
                        [pager]="defaultGridPagerConfig"
                        (onCellClick)="onCellClick($event)"
                        (onInitialized)="onDataGridInit($event)"
                        (onContentReady)="onContentReady()"
                        (onToolbarPreparing)="onToolbarPreparing($event)"
                        (onDataErrorOccurred)="httpInterceptor.handleError($event.error)">
                <dxo-search-panel [visible]="true" [width]="300"></dxo-search-panel>
                <dxo-header-filter [visible]="true" [allowSearch]="true"></dxo-header-filter>

                <dxi-column [width]="'40px'" [fixed]="true" [fixedPosition]="'left'" [showInColumnChooser]="false" [allowExporting]="false"></dxi-column>
                <dxi-column
                    alignment="center"
                    width="90px"
                    [fixed]="true" 
                    [showInColumnChooser]="false" 
                    [allowExporting]="false"
                    cellTemplate="actionsCellTemplate"
                    headerCellTemplate="actionsCellTemplate">
                </dxi-column>
                <dxi-column dataField="FileName" caption="{{l('FileName')}}"></dxi-column>
                <dxi-column dataField="Size" [calculateSortValue]="numerizeFileSizeSortValue" caption="{{l('Size')}}" [calculateCellValue]="calculateFileSizeValue" [allowSearch]="false"></dxi-column>
                <dxi-column dataField="Period" caption="{{l('Period')}}" cssClass="tabular" sortOrder="desc" [allowSearch]="false"></dxi-column>
                <dxi-column dataField="CreationTime" caption="{{l('Date')}}" cssClass="tabular" cellTemplate="dateCell" sortOrder="desc" [allowSearch]="false"></dxi-column>
                <dxi-column dataField="From" caption="{{l('From')}}" cssClass="tabular" cellTemplate="dateCell" sortOrder="desc" [allowSearch]="false"></dxi-column>
                <dxi-column dataField="To" caption="{{l('To')}}" cssClass="tabular" cellTemplate="dateCell" sortOrder="desc" [allowSearch]="false"></dxi-column>
                <dxi-column [width]="'40px'" [fixed]="true" [fixedPosition]="'right'" [showInColumnChooser]="false" [allowExporting]="false"></dxi-column>

                <a class="dx-link dx-link-edit" *dxTemplate="let cellData of 'actionsCellTemplate'">Edit</a>

                <div *dxTemplate="let cellData of 'dateCell'">
                    {{ cellData.value | date: formatting.dateTime : userTimezone }}
                </div>
                <div *dxTemplate="let data of 'title'">
                    <h2 class="title">{{l('Documents')}}</h2>
                </div>

                <dxo-load-panel [enabled]="true"></dxo-load-panel>
                <dxo-scrolling mode="virtual"></dxo-scrolling>

                <dxo-sorting mode="multiple"></dxo-sorting>
                <dxo-group-panel [visible]="false"></dxo-group-panel>
            </dx-data-grid>            
        </div>

        <ng-template #nodata>
            <app-no-data [showLink]="false"></app-no-data>
        </ng-template>

    </div>
</div>