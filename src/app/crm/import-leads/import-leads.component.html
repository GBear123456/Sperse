<div [@routerTransition] class="import-wrapper">
    <left-menu [hidden]="hideLeftMenu"></left-menu>
    <import-wizard
        [title]="l('Import leads')"
        icon="icon-globe"
        [lookupFields]="mappingFields"
        [columnsConfig]="fieldsConfig"
        [checkSimilarFields]="compareFields"
        [preProcessFieldBeforeReview]="preProcessFieldBeforeReview"
        [validateFieldsMapping]="validateFieldsMapping"
        [toolbarConfig]="toolbarConfig"
        (onSelectionChanged)="onStepChanged($event)"
        (onComplete)="complete($event)"
        (onCancel)="cancel()">

        <div class="success">
            <div *ngIf="importStatus == importStatuses.InProgress">
                <h1>{{l('ImportProgressHeader')}}</h1>
                <p>{{l('Total')}}: {{totalCount}}</p>
                <p>{{l('Imported')}}: {{importedCount}}</p>
                <p>{{l('Failed')}}: {{failedCount}}</p>
                <import-progress-bar [summaryTooltip]="false"></import-progress-bar>
                <button class="button-layout button-primary" (click)="reset()">{{l('AnotherImport')}}</button>
                <button class="button-layout button-default" (click)="cancelImport()">{{l('CancelImport')}}</button>
            </div>

            <div *ngIf="importStatus == importStatuses.Completed">
                <h1>{{ l('ImportedLeadsHeader', importedCount, totalCount, l(importType.toString() + 's').toLowerCase()) }}</h1>
                <!-- h3>{{l('ImportedLeadsMessage')}}</h3 -->
                <button class="button-layout button-primary" (click)="reset()">{{l('AnotherImport')}}</button>
                <button class="button-layout button-default" (click)="cancel()">{{l('GoToDashboard')}}</button>
            </div>

            <div *ngIf="importStatus == importStatuses.New">
                <h1>{{l('PendingLeadsHeader')}}</h1>
                <button class="button-layout button-primary" (click)="navigateToList()">{{l('ViewAllImports')}}</button>
            </div>
        </div>
    </import-wizard>
</div>

<crm-user-assignment-list
    [selectedKeys]="selectedClientKeys"
    [selectedItemKey]="userId"
    [bulkUpdateMode]="true"
    [hideButtons]="true"
    (onSelectionChanged)="onUserAssignmentChanged($event)"
    [permissionKey]="getUserAssignmentPermissionKey()"
    [assignedUsersSelector]="getAssignedUsersSelector()">
</crm-user-assignment-list>
<app-static-list #stagesList
    [width]="'210px'"
    [highlightSelected]="true"
    [showConfirmation]="false"
    [title]="l('Stages')"
    [selectedKeys]="selectedClientKeys"
    [targetSelector]="'[aria-label=Stage]'"
    [hideButtons]="true"
    [disableHindmost]="false"
    [funnelStyling]="true"
    (onItemSelected)="onStagesChanged($event)"
    [list]="stages">
</app-static-list>
<!--<app-static-list #partnerTypesList-->
    <!--[width]="'210px'"-->
    <!--[highlightSelected]="true"-->
    <!--[title]="l('PartnerType')"-->
    <!--[selectedKeys]="[selectedPartnerTypId]"-->
    <!--[showConfirmation]="false"-->
    <!--[hideButtons]="true"-->
    <!--[highlightSelected]="true"-->
    <!--[targetSelector]="'[accessKey=PartnerType]'"-->
    <!--(onItemSelected)="onPartnerTypeChanged($event)"-->
    <!--[list]="partnerTypes">-->
<!--</app-static-list>-->
<crm-types-list [selectedKeys]="selectedClientKeys" [bulkUpdateMode]="true" [hideButtons]="true" (onSelectedChanged)="onPartnerTypeChanged($event)"></crm-types-list>
<crm-lists-list [selectedKeys]="selectedClientKeys" [bulkUpdateMode]="true" [hideButtons]="true" (onSelectionChanged)="onListsChanged($event)"></crm-lists-list>
<crm-tags-list [selectedKeys]="selectedClientKeys" [bulkUpdateMode]="true" [hideButtons]="true" (onSelectedChanged)="onTagsChanged($event)"></crm-tags-list>
<crm-rating [selectedKeys]="selectedClientKeys" [bulkUpdateMode]="true" [ratingValue]="defaultRating" [hideButtons]="true" (onValueChanged)="onRatingChanged($event)"></crm-rating>
<crm-stars-list [selectedKeys]="selectedClientKeys" [bulkUpdateMode]="true" [hideButtons]="true" (onSelectionChanged)="onStarsChanged($event)"></crm-stars-list>

