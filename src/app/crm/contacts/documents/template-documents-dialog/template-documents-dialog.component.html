<h2 mat-dialog-title>{{ title }}<span class="close" (click)="close()"></span></h2>
<mat-dialog-content>
    <div class="wrapper">
        <dx-tabs 
            width="300px"
            [visible]="isDocumentsVisible || isTemplatesVisible"
            [dataSource]="folderTabs"
            [(selectedIndex)]="selectedIndex">
        </dx-tabs>
        <div *ngIf="selectedIndex">
            <i class="layout-view dx-icon-{{layout == VIEW_MODE_DETAILS ? 'smalliconslayout' : 'contentlayout'}}" (click)="onLayoutToogle()"></i>
            <dx-file-manager
                width="360px"
                [height]="getHeight()"
                [allowedFileExtensions]="[]"
                [fileProvider]="selectedIndex == 1 ? documentsFileProvider : templatesFileProvider" 
                [itemView]="{mode: layout}"
                (onContentReady)="onContentReady()">
                <dxo-permissions 
                    [create]="false"
                    [copy]="false"
                    [move]="false"
                    [remove]="false"
                    [rename]="false"
                    [upload]="false"
                    [download]="false">
                </dxo-permissions>
            </dx-file-manager>
        </div>
        <div *ngIf="!selectedIndex">
            <div class="drop-down" *ngIf="!totalCount">
                <ngx-file-drop (onFileDrop)="data.dropFiles ? data.dropFiles($event) : fileDropped($event)" [ngClass]="{'full-height': data.fullHeight, 'single-tab': !isDocumentsVisible && !isTemplatesVisible}">
                    <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
                        <img src="./assets/common/icons/upload-file.svg">
                        <p>{{ls.l('DragAndDrop')}}</p>
                        <p style="color: #677380;">{{ls.l('or')}}</p>
                        <p class="alter-text">
                            <a href="javascript:void(0);" (click)="openFileSelector()">{{ls.l('SelectFileFrom')}}</a>
                        </p>
                    </ng-template>
                </ngx-file-drop>
            </div>
            <div class="uploading" *ngIf="totalCount > 0">
                <dx-scroll-view showScrollbar="onHover">
                    <div class="wrapper">
                        <img src="./assets/common/icons/upload-file.svg">
                        <h3>{{ls.l('Uploading')}}<span>{{uploadedCount + ' of ' + totalCount + ' files'}}</span></h3>
                        <ng-container *ngFor="let file of files; let i = index">
                            <div class="file-progress-wrapper"
                                [ngStyle]="{ background: 'linear-gradient(to right, #00aeef21 ' + file.progress + '%, #f3f7fa 0%)' }">
                                <img width="16px" height="16px" src="./assets/common/icons/file-types/{{file.type}}.svg" onError="this.src='./assets/common/icons/files.svg';">
                                <span class="file-name">{{file.name}}</span>
                                <span (click)="cancelUpload(i)" [ngClass]="{ cancel: file.progress < 100, completed: file.progress >= 100 }"></span>
                            </div>
                        </ng-container>
                    </div>
                </dx-scroll-view>
            </div>
        </div>
    </div>
</mat-dialog-content>
<mat-dialog-actions *ngIf="selectedIndex">
    <button mat-button mat-dialog-close class="button-layout button-default">{{ls.l('Cancel')}}</button>
    <button mat-button class="button-layout button-primary" (click)="onAddFile()">{{ls.l('Add')}}</button>
</mat-dialog-actions>