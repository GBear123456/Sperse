<div class="inbox-user-form" >
    <div class="inbox-list">
        <dx-list 
            width="100%"
            height="100%"
            searchExpr="Name"
            searchMode="contains"
            selectionMode="single"
            pageLoadMode="scrollBottom"
            [searchTimeout]="500"
            [dataSource]="dataSource"
            [selectedItemKeys]="[activeEmail?.id]"
            [searchEditorOptions]="{placeholder: ls.l('SearchMessage')}"
            [searchEnabled]="true"
            (onItemClick)="initActiveEmail($event.itemData)">
                <div *dxTemplate="let item of 'item'">
                    <div class="email" title="{{item.date | date: formatting.inboxDate : userTimezone}}">
                        <div [ngStyle]="{'background-image': 'url(' + profileService.getProfilePictureUrl(item?.fromUserThumbnailId, noPhotoUrl) + ')'}" class="img-circle"></div>
                        <div class="details">
                            <span class="from">{{item.fromUserName}}</span>
                            <span class="subject">{{item.subject}}</span>
                            <span class="body">{{item.body}}</span>
                        </div>
                        <div class="date">{{item.creationTime | date: formatting.monthDay : userTimezone}}</div>
                    </div>
                </div>
        </dx-list>
    </div>
    <div class="inbox-content" *ngIf="activeEmail">
        <app-toolbar [config]="contentToolbar"></app-toolbar>        
        <div class="header">
            <div [ngStyle]="{'background-image': 'url(' + profileService.getProfilePictureUrl(activeEmail?.fromUserThumbnailId, noPhotoUrl) + ')'}" class="img-circle avatar"></div>  
            <div class="details">
                <span class="from">{{activeEmail?.from}}</span>
                <span class="subject">{{activeEmail?.subject}}</span>
                <span class="to">{{ls.l('to')}} {{activeEmail?.to}}</span>
            </div>
            <div class="date">{{activeEmail?.creationTime | date: formatting.inboxDate : userTimezone}}</div>
        </div>
        <div class="content">
            <dx-scroll-view showScrollbar="onHover">
                <div class="body" [innerHtml]="activeEmail?.body"></div>
            </dx-scroll-view>
            <div class="attachments">
                <div *ngFor="let attachment of activeEmail?.attachments" class="attachment">
                    <a [download]="attachment.name" href="javascript:void(0)" class="name" (click)="openAttachment(attachment)">{{attachment.name}}</a>&nbsp;<span class="size">({{attachment.size | filesize}})</span>
                </div>
            </div>
        </div>
    </div>
    <app-no-data
        [hidden]="activeEmail"
        [showLink]="false">
    </app-no-data>
</div>