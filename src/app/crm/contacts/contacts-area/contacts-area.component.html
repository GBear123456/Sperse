<div class="contacts">
    <div *ngIf="showContactType == 'phones'">
        <div class="phone" *ngFor="let phone of contactInfoData?.phones; let i = index;">
            <ul *ngIf="!phone.inplaceEdit">
                <div class="email-row" >
                    <button class="icon-btn" aria-label="Contact action" (click)="showDialog('emailAddress', null, $event)">
                        <img src="./assets/common/icons/contact/plus.svg" alt="icon">
                    </button>
                    <span class="email-address" (click)="inPlaceEdit('phoneNumber', phone, $event, i)">
                        {{ phone.phoneNumber | phone }}
                        <span *ngIf="phone.phoneExtension" class="phoneExt">Ext. {{ phone.phoneExtension }}</span>
                        <img src="./assets/common/icons/contact/call-calling.svg" alt="send">
                    </span>

                    <div class="actions" *ngIf="isEditAllowed" [class.visible]="hovered">
                        <span *ngIf="isEditAllowed" class="send-icon" (click)="showDialog('phoneNumber', null, $event)">
                          <img src="./assets/common/icons/contact/send_icon.svg" alt="send">
                          send
                        </span>
                        <i class="copy save-to-clipboard" aria-hidden="true" (click)="copyToClipbord(phone.phoneNumber)"></i>
                        <i class="edit fa fa-pencil" aria-hidden="true" (click)="showDialog('phoneNumber', phone, $event, i)"></i>
                        <i class="delete fa fa-times" aria-hidden="true" (click)="deletePhoneNumber(phone, $event, i)"></i>
                    </div>
                </div>
            </ul>
            <div *ngIf="phone.inplaceEdit" class="inplace-edit-wrapper">
                <country-phone-number [(phoneNumber)]="phone.phoneNumber" #countryPhoneNumber></country-phone-number>
                <dx-button class="update" icon="todo"
                           (onClick)="updatePhoneNumber(countryPhoneNumber.isValid(), phone, $event)"></dx-button>
                <dx-button class="exit" icon="refresh" (onClick)="closeInPlaceEdit('phoneNumber', phone)"></dx-button>
            </div>
        </div>
    </div>
    <div *ngIf="showContactType == 'emails'">
        <div class="emails" *ngIf="contactInfoData?.emails?.length">
            <ul *ngFor="let email of contactInfoData?.emails; let i = index;">
                <div class="email-row" *ngIf="!email.inplaceEdit" >
                    <button class="icon-btn" aria-label="Contact action" (click)="showDialog('emailAddress', null, $event)">
                        <img src="./assets/common/icons/contact/plus.svg" alt="icon">
                    </button>
                    <span class="email-address" (click)="inPlaceEdit('emailAddress', email, $event, i)">{{ email.emailAddress }}</span>

                    <div class="actions" *ngIf="isEditAllowed" [class.visible]="hovered">
                        <span class="send-icon">
                          <img src="./assets/common/icons/contact/send_icon.svg" alt="send">
                          send
                        </span>
                        <i class="copy save-to-clipboard" aria-hidden="true" (click)="copyToClipbord(email.emailAddress)"></i>
                        <i *ngIf="checkEditEmailAllowed(email)" class="edit fa fa-pencil" aria-hidden="true" (click)="editEmailAddress(email, $event, i)"></i>
                        <i *ngIf="checkEditEmailAllowed(email)" class="delete fa fa-times" aria-hidden="true" (click)="deleteEmailAddress(email, $event, i)"></i>
                        <i *ngIf="!checkEditEmailAllowed(email)" class="edit-info" [title]="ls.l('EmailEditForbidden')"></i>
                    </div>
                </div>
                <div *ngIf="email.inplaceEdit" class="inplace-edit-wrapper">
                    <dx-validation-group>
                        <dx-text-box placeholder="" [(value)]="email.emailAddress"
                                     (onValueChanged)="itemValueChanged('emailAddress', email)">
                            <dx-validator>
                                <dxi-validation-rule type="required"
                                                     message="{{ls.l('EmailIsRequired')}}."></dxi-validation-rule>
                                <dxi-validation-rule type="pattern" [pattern]="emailRegEx"
                                                     message="{{ls.l('EmailIsNotValid')}}."></dxi-validation-rule>
                            </dx-validator>
                        </dx-text-box>
                        <dx-button class="update" icon="todo"
                                   (onClick)="updateItem('emailAddress', email, $event)"></dx-button>
                        <dx-button class="exit" icon="refresh"
                                   (onClick)="closeInPlaceEdit('emailAddress', email)"></dx-button>
                    </dx-validation-group>
                </div>
            </ul>
        </div>
    </div>
</div>
