<h2 mat-dialog-title (mousedown)="mouseDown($event)" *ngIf="data.title">{{data.title}}</h2>
<h2 mat-dialog-title (mousedown)="mouseDown($event)" *ngIf="!data.title">{{l('ContactInfoDialogTitle', l(action), l('Address'))}}</h2>
<dx-scroll-view showScrollbar="always">
    <mat-dialog-content>
        <dx-validation-group (onInitialized)="initValidationGroup($event)">
            <div *ngIf="!data.editAddressOnly">
              <label>{{l('Type')}}</label>
              <dx-select-box
                name="usageType"
                [dataSource]="types"
                displayExpr="name"
                valueExpr="id"
                [disabled]="!isEditAllowed"
                [(value)]="data.usageTypeId"
                fieldTemplate="fieldTemplate">
                <div *dxTemplate="let item of 'fieldTemplate'">
                  <div class="type-item-wrapper ">
                    <dx-text-box class="addressType type-{{item?.id}}"
                      [value]="item?.name"
                      [readOnly]="true">
                    </dx-text-box>
                  </div>
                </div>
                <dx-validator>
                  <dxi-validation-rule type="required" message="{{l('TypeRequired')}}"></dxi-validation-rule>
                </dx-validator>
              </dx-select-box>
            </div>

            <div>
              <label>{{l('Address')}}</label>
              <input *ngIf="!googleAutoComplete" type="text"
                name="Address"
                placeholder=""
                [(ngModel)]="address"
                class="dx-texteditor-input"
                [disabled]="!isEditAllowed"/>
              <input *ngIf="googleAutoComplete" type="text"
                name="Address"
                placeholder=""
                [(ngModel)]="address"
                class="dx-texteditor-input"
                [disabled]="!isEditAllowed"
                (country)="data.country=$event"
                (street_number)='data.streetNumber=$event'
                (street)='data.streetAddress=$event'
                (city)='data.city=$event'
                (state)='data.state=$event'
                (postal_code)='data.zip=$event'
                (setAddress)="onAddressChanged($event)"
                angularGooglePlace/>
            </div>

            <div>
              <label>{{l('Country')}}</label>
              <dx-select-box
                  [dataSource]="countries"
                  displayExpr="name"
                  valueExpr="name"
                  [disabled]="!isEditAllowed"
                  name="country"
                  [searchEnabled]="true"
                  [(value)]="data.country"
                  fieldTemplate="field"
                  (onValueChanged)="onCountryChange($event)">
                  <div *dxTemplate="let data of 'field'">
                      <div class="custom-item">
                          <dx-text-box class="state"
                                       [value]="data?.name"
                                       [readOnly]="true">
                          </dx-text-box>
                      </div>
                  </div>
              </dx-select-box>
            </div>

            <div>
              <label>{{l('State')}}</label>
              <dx-select-box
                  [dataSource]="states"
                  displayExpr="name"
                  valueExpr="name"
                  name="state"
                  [disabled]="!isEditAllowed"
                  [searchEnabled]="true"
                  [(value)]="data.state"
                  fieldTemplate="field">
                  <div *dxTemplate="let data of 'field'">
                      <div class="custom-item">
                          <dx-text-box class="state"
                                       [value]="data?.name"
                                       [readOnly]="true">
                          </dx-text-box>
                      </div>
                  </div>
              </dx-select-box>
            </div>

            <div>
              <label>{{l('City')}}</label>
              <dx-text-box
                  name="city"
                  [disabled]="!isEditAllowed"
                  maxLength="50"
                  [(value)]="data.city">
              </dx-text-box>
            </div>

            <div>
              <label>{{l('ZipCode')}}</label>
              <dx-text-box
                  name="zip"
                  [disabled]="!isEditAllowed"
                  maxLength="10"
                  [(value)]="data.zip">
              </dx-text-box>
            </div>

            <div *ngIf="!data.editAddressOnly">
              <label>{{l('Comment')}}</label>
              <dx-text-box
                name="comment"
                [disabled]="!isEditAllowed"
                [(value)]="data.comment">
              </dx-text-box>
            </div>

            <p *ngIf="!data.editAddressOnly">
              <dx-check-box
                text="{{l('ActiveContact')}}"
                [disabled]="!isEditAllowed"
                [(value)]="data.isActive">
              </dx-check-box>
              <dx-check-box
                text="{{l('ConfirmedContact')}}"
                [disabled]="!isEditAllowed"
                [(value)]="data.isConfirmed">
              </dx-check-box>
            </p>
        </dx-validation-group>
    </mat-dialog-content>
</dx-scroll-view>
<mat-dialog-actions>
  <button *ngIf="isEditAllowed && data.deleteItem && (action=='Edit')" mat-button class="button-layout button-clean-red" (click)="data.deleteItem($event)">
    <i class="delete fa fa-times" aria-hidden="true"></i>{{l('Delete')}}
  </button>
  <button mat-button mat-dialog-close class="button-layout button-default">{{l('Cancel')}}</button>
  <button *ngIf="isEditAllowed" mat-button class="button-layout button-primary" (click)="onSave($event)">{{action == 'Edit' ? l('Update'): action}}</button>
</mat-dialog-actions>
