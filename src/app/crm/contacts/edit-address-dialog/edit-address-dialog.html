<h2 mat-dialog-title (mousedown)="mouseDown($event)">
    {{ ls.l('ContactInfoDialogTitle', ls.l(action), ls.l('Address'))}}
</h2>
<dx-scroll-view showScrollbar="always">
    <mat-dialog-content>
        <dx-validation-group (onInitialized)="initValidationGroup($event)">
            <div *ngIf="data.showType">
                <label>{{ls.l('Type')}}</label>
                <dx-select-box
                    name="usageType"
                    [dataSource]="types"
                    displayExpr="name"
                    valueExpr="id"
                    [disabled]="!isEditAllowed"
                    [(value)]="data.usageTypeId"
                    itemTemplate="itemTemplate"
                    fieldTemplate="fieldTemplate">
                    <div *dxTemplate="let item of 'fieldTemplate'">
                        <div class="type-item-wrapper ">
                            <dx-text-box class="addressType type-{{item?.id}}"
                                         [value]="item?.name"
                                         [readOnly]="true"
                                         [hint]="getUsageTypeHint(item)">
                            </dx-text-box>
                        </div>
                    </div>
                    <div *dxTemplate="let item of 'itemTemplate'">
                        <div [title]="getUsageTypeHint(item)">{{item.name}}</div>
                    </div>
                    <dx-validator>
                        <dxi-validation-rule type="required" [message]="ls.l('TypeRequired')"></dxi-validation-rule>
                    </dx-validator>
                </dx-select-box>
            </div>
            <div style="position:relative;">
                <label class="address">{{ls.l('Address')}}</label>
                <input *ngIf="!googleAutoComplete"
                       type="text"
                       name="Address"
                       placeholder=""
                       [(ngModel)]="address"
                       class="dx-texteditor-input"
                       [disabled]="!isEditAllowed"/>
                <input *ngIf="googleAutoComplete"
                       #addressInput
                       type="text"
                       name="Address"
                       placeholder=""
                       [(ngModel)]="address"
                       class="dx-texteditor-input"
                       [disabled]="!isEditAllowed"
                       (onAddressChange)="onAddressChanged($event)"
                       ngx-google-places-autocomplete/>
            </div>
            <div>
                <label>{{ls.l('Country')}}</label>
                <dx-select-box
                    [dataSource]="countries"
                    displayExpr="name"
                    valueExpr="name"
                    [disabled]="!isEditAllowed"
                    name="country"
                    [searchEnabled]="true"
                    [(value)]="data.countryName"
                    fieldTemplate="field"
                    (onValueChanged)="onCountryChange($event)">
                    <div *dxTemplate="let data of 'field'">
                        <div class="custom-item">
                            <dx-text-box class="state"
                                         [value]="data?.name"
                                         [readOnly]="true">
                            </dx-text-box>
                        </div>
                    </div>
                </dx-select-box>
            </div>

            <div>
                <label>{{ls.l('State')}}</label>
                <dx-select-box
                    [acceptCustomValue]="true"
                    [dataSource]="getCountryStates() | async"
                    displayExpr="name"
                    valueExpr="name"
                    name="state"
                    [disabled]="!isEditAllowed"
                    [searchEnabled]="true"
                    [(value)]="data.stateName"
                    fieldTemplate="field"
                    (onValueChanged)="stateChanged($event)"
                    (onCustomItemCreating)="onCustomStateCreate($event)">
                    <div *dxTemplate="let data of 'field'">
                        <div class="custom-item">
                            <dx-text-box class="state" [value]="data?.name"></dx-text-box>
                        </div>
                    </div>
                </dx-select-box>
            </div>

            <div>
                <label>{{ls.l('City')}}</label>
                <dx-text-box
                    name="city"
                    [disabled]="!isEditAllowed"
                    maxLength="50"
                    [(value)]="data.city">
                </dx-text-box>
            </div>
            <div *ngIf="data.showNeighborhood">
                <label>{{ls.l('Neighborhood')}}</label>
                <dx-text-box
                    name="neighborhood"
                    [disabled]="!isEditAllowed"
                    maxLength="128"
                    [(value)]="data.neighborhood">
                </dx-text-box>
            </div>
            <div>
                <label>{{ls.l('ZipCode')}}</label>
                <dx-text-box
                    name="zip"
                    [disabled]="!isEditAllowed"
                    maxLength="10"
                    [(value)]="data.zip">
                </dx-text-box>
            </div>

            <div>
                <label>{{ls.l('Comment')}}</label>
                <dx-text-box
                    name="comment"
                    [disabled]="!isEditAllowed"
                    [(value)]="data.comment">
                </dx-text-box>
            </div>

            <p>
                <dx-check-box
                    text="{{ls.l('ActiveContact')}}"
                    [disabled]="!isEditAllowed"
                    [(value)]="data.isActive">
                </dx-check-box>
                <dx-check-box
                    text="contactsService.getConfirmedContactText(data)"
                    [disabled]="!isEditAllowed"
                    [(value)]="data.isConfirmed">
                </dx-check-box>
            </p>
        </dx-validation-group>
    </mat-dialog-content>
</dx-scroll-view>
<mat-dialog-actions>
    <button *ngIf="isEditAllowed && data.isDeleteAllowed && data.deleteItem && action === 'Edit'"
            mat-button
            class="button-layout button-clean-red"
            (click)="data.deleteItem($event)">
        <i class="delete fa fa-times" aria-hidden="true"></i>{{ls.l('Delete')}}
    </button>
    <button mat-button mat-dialog-close class="button-layout button-default">{{ls.l('Cancel')}}</button>
    <button *ngIf="isEditAllowed" mat-button class="button-layout button-primary" (click)="onSave()">
        {{action == 'Edit' ? ls.l('Update'): action}}
    </button>
</mat-dialog-actions>
