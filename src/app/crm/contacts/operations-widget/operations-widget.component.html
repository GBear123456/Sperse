<div class="operations-widget">
    <ng-template #titleTemplate>
        <h3 class="title">{{ title }}</h3>
    </ng-template>
    <app-toolbar
        [titleTemplate]="titleTemplate"
        [config]="toolbarConfig"
    ></app-toolbar>
    <ng-container *ngIf="enabled">
        <app-static-list
            *ngIf="
                permission.checkCGPermission(contactInfo?.groups, '') &&
                pipelineDataSource?.length &&
                !contactInfo.parentId
            "
            #stagesList
            [width]="'210px'"
            [title]="l('Stages')"
            [selectedTabId]="selectedPipelineId"
            [tabsDataSource]="pipelineDataSource"
            [selectedKeys]="[selectedStageId]"
            [selectedItems]=""
            [hideButtons]="true"
            [highlightSelected]="true"
            [bulkUpdatePermissionKey]="permissions.CRMBulkUpdates"
            (onSelectionChanged)="updateStage($event)"
            targetSelector="[aria-label='{{ l('Toolbar_Stage') }}']"
            [funnelStyling]="true"
            [showTitle]="false"
        >
        </app-static-list>
        <app-static-list
            #statusesList
            [width]="'180px'"
            [title]="l('Toolbar_Groups')"
            [showConfirmation]="false"
            [hideButtons]="true"
            [highlightSelected]="true"
            [showSelectionControls]="true"
            [selectionMode]="'multiple'"
            [selectedKeys]="activeGroupIds"
            targetSelector="[aria-label='{{ l('Toolbar_Groups') }}']"
            [list]="statuses"
            (onSelectionChanged)="updateStatus($event)"
        >
        </app-static-list>
        <!--<app-static-list-->
        <!--#partnerTypesList-->
        <!--[width]="'210px'"-->
        <!--[title]="l('Type')"-->
        <!--[selectedKeys]="[selectedPartnerTypeId]"-->
        <!--[selectedItems]=""-->
        <!--[hideButtons]="true"-->
        <!--[highlightSelected]="true"-->
        <!-- [bulkUpdatePermissionKey]="permissions.CRMBulkUpdates" -->
        <!--(onSelectionChanged)="updatePartnerType($event)"-->
        <!--[targetSelector]="'[accessKey=PartnerType]'"-->
        <!--[showTitle]="false"-->
        <!--[list]="partnerTypes">-->
        <!--</app-static-list>-->
        <types-list
            [selectedKeys]="[contactInfo.id]"
            [selectedItems]="[selectedPartnerTypeId]"
        >
        </types-list>
        <tags-list
            [selectedKeys]="[contactInfo.id]"
            [selectedItems]="contactInfo?.tags"
            [managePermission]="manageCGPermision"
            (onUpdated)="invalidateContact()"
        >
        </tags-list>
        <lists-list
            [selectedKeys]="[contactInfo.id]"
            [selectedItems]="contactInfo?.lists"
            [managePermission]="manageCGPermision"
            (onUpdated)="invalidateContact()"
        >
        </lists-list>
        <user-assignment-list
            [selectedKeys]="[contactInfo.id]"
            [selectedItemKey]="contactInfo?.assignedUserId"
            [assignedUsersSelector]="assignedUsersSelector"
            [permissionKey]="getAssignmentsPermissionKey()"
            [proxyService]="getProxyService()"
        >
        </user-assignment-list>
        <rating
            [selectedKeys]="[contactInfo.id]"
            [ratingValue]="contactInfo?.ratingId"
            (onRatingUpdated)="invalidateContact()"
            [managePermission]="manageCGPermision"
        >
        </rating>
        <crm-stars-list
            *ngIf="!isBankCodeLayout"
            [selectedKeys]="[contactInfo.id]"
            [selectedItemKey]="contactInfo?.starId"
            [managePermission]="manageCGPermision"
            (onUpdated)="invalidateContact()"
        >
        </crm-stars-list>
    </ng-container>
    <div class="user-contact-info-back gap-[10px] w-[100%] !flex">
        <div
            class="bg-custombg rounded-[10px] !flex flex-row items-center justify-between py-[18px] px-[18px] w-[570px] box-border"
        >
            <div class="flex gap-[5px]">
                <div
                    class="w-[35px] h-[35px] bg-[#0DD99C] rounded-[10px] flex items-center justify-center"
                >
                    <img
                        src="/assets/common/icons/call.svg"
                        class="w-[15px] h-[15px]"
                    />
                </div>
                <div class="flex flex-col gap-[5px]">
                    <span class="text-[13px]/[18px] font-[500] text-[#10213A]"
                        >Activity
                    </span>
                    <span
                        class="text-[13px]/[18px] font-[500] text-customsubtext"
                        >(1)
                    </span>
                </div>
            </div>
            <div class="flex gap-[5px]">
                <div
                    class="w-[35px] h-[35px] bg-[#595FED] rounded-[10px] flex items-center justify-center"
                >
                    <img
                        src="/assets/common/icons/profile-circle.svg"
                        class="w-[15px] h-[15px]"
                    />
                </div>
                <div class="flex flex-col gap-[5px]">
                    <span class="text-[13px]/[18px] font-[500] text-[#10213A]"
                        >Contacts
                    </span>
                    <span
                        class="text-[13px]/[18px] font-[500] text-customsubtext"
                        >(5)
                    </span>
                </div>
            </div>
            <div class="flex gap-[5px]">
                <div
                    class="w-[35px] h-[35px] bg-[#EFAC2B] rounded-[10px] flex items-center justify-center"
                >
                    <img
                        src="/assets/common/icons/status-up.svg"
                        class="w-[15px] h-[15px]"
                    />
                </div>
                <div class="flex flex-col gap-[5px]">
                    <span class="text-[13px]/[18px] font-[500] text-[#10213A]"
                        >Tasks
                    </span>
                    <span
                        class="text-[13px]/[18px] font-[500] text-customsubtext"
                        >(4)
                    </span>
                </div>
            </div>
            <div class="flex gap-[5px]">
                <div
                    class="w-[35px] h-[35px] bg-[#ED63DF] rounded-[10px] flex items-center justify-center"
                >
                    <img
                        src="/assets/common/icons/direct-normal.svg"
                        class="w-[15px] h-[15px]"
                    />
                </div>
                <div class="flex flex-col gap-[5px]">
                    <span class="text-[13px]/[18px] font-[500] text-[#10213A]"
                        >Files
                    </span>
                    <span
                        class="text-[13px]/[18px] font-[500] text-customsubtext"
                        >(65)
                    </span>
                </div>
            </div>
            <div class="flex gap-[5px]">
                <div
                    class="w-[35px] h-[35px] bg-[#8CD135] rounded-[10px] flex items-center justify-center"
                >
                    <img
                        src="/assets/common/icons/receipt.svg"
                        class="w-[15px] h-[15px]"
                    />
                </div>
                <div class="flex flex-col gap-[5px]">
                    <span class="text-[13px]/[18px] font-[500] text-[#10213A]"
                        >Invoices
                    </span>
                    <span
                        class="text-[13px]/[18px] font-[500] text-customsubtext"
                        >(34)
                    </span>
                </div>
            </div>
        </div>
        <div
            class="bg-custombg rounded-[10px] !flex items-center justify-between py-[18px] px-[18px] flex-1 box-border"
        >
            <div class="flex flex-col gap-[5px]">
                <span
                    class="text-[11px]/[27px] font-[500] text-[#08295B] text-uppercase"
                    >Gross Sales</span
                >
                <span class="text-[21px]/[27px] font-bold text-[#08295B]"
                    >€159,500</span
                >
            </div>
            <div class="flex flex-col gap-[5px]">
                <span
                    class="text-[11px]/[27px] font-[500] text-[#08295B] text-uppercase"
                    >Current plan</span
                >
                <span class="text-[21px]/[27px] font-bold text-[#08295B]"
                    >€499<span
                        class="text-[13px]/[27px] font-bold text-[#08295B]"
                        >/mo</span
                    ></span
                >
            </div>
            <div class="flex flex-col gap-[5px]">
                <span
                    class="text-[11px]/[27px] font-[500] text-[#08295B] text-uppercase"
                    >Balance Due</span
                >
                <span class="text-[21px]/[27px] font-bold text-[#08295B]"
                    >€1,275.00</span
                >
            </div>
        </div>
    </div>
</div>
