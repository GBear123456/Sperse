<h2 mat-dialog-title>{{ls.l('Invoice_AddPayment')}}</h2>
<mat-dialog-content>
    <div class="element-row">
        <label>{{ls.l('Invoice #')}}</label>
        <dx-text-box name="invoiceNumber"
                     [readOnly]="true"
                     [(value)]="model.invoiceNumber">
        </dx-text-box>
    </div>
    <div class="element-row">
        <label>{{ls.l('Date')}}</label>
        <dx-date-box #dateComponent
                     name="date"
                     [placeholder]="ls.l('Date')"
                     (onKeyDown)="allowDigitsOnly($event, ['/'])"
                     [(value)]="date">
        </dx-date-box>
    </div>
    <div class="element-row">
        <label>{{ls.l('Description')}}</label>
        <dx-text-box name="description"
                     [(value)]="model.description">
        </dx-text-box>
    </div>
    <div class="element-row">
        <label>{{ls.l('Stage')}}</label>
        <dx-select-box name="stage"
                       displayExpr="name"
                       valueExpr="name"
                       [dataSource]="data.stages$ | async"
                       [(value)]="model.orderStage">
        </dx-select-box>
    </div>
    <div class="element-row">
        <label>{{ls.l('Type')}}</label>
        <dx-select-box name="type"
                       [dataSource]="transactionTypes"
                       displayExpr="text"
                       valueExpr="text"
                       [(value)]="model.transactionType">
        </dx-select-box>
    </div>
    <div class="element-row">
        <label>{{ls.l('Amount')}}</label>
        <dx-number-box name="amount"
                       [format]="currency + ' #,##0.##'"
                       [min]="0"
                       [max]="data.invoice.Amount"
                       [(value)]="amount">
        </dx-number-box>
    </div>
    <div class="element-row">
        <label>{{ls.l('Provider')}}</label>
        <dx-select-box name="paymentProvider"
                       [dataSource]="paymentProviders$ | async"
                       [showClearButton]="true"
                       [(value)]="model.gatewayName">
        </dx-select-box>
    </div>
    <div *ngIf="model.gatewayName" class="element-row">
        <label>{{ls.l('Transaction ID')}}</label>
        <dx-text-box name="transactionId"
                     [(value)]="model.gatewayTransactionId">
        </dx-text-box>
    </div>
    <div *ngIf="model.gatewayName && model.transactionType != PaymentTransactionType.Sale" class="element-row">
        <label>{{ls.l('Original Tran ID')}}</label>
        <dx-text-box name="originalTransactionId"
                     [(value)]="model.gatewayOriginTransactionId">
        </dx-text-box>
    </div>
    <div class="element-row recurring">
        <label>{{ls.l('Recurring')}}</label>
        <dx-check-box width="50px"
                      name="recurring"
                      [(value)]="model.hasRecurringBilling">
        </dx-check-box>
    </div>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-button mat-dialog-close class="button-layout button-default">{{ls.l('Cancel')}}</button>
  <button mat-button class="button-layout button-primary" (click)="markAsPaid(dateComponent)">{{ls.l('Save')}}</button>
</mat-dialog-actions>