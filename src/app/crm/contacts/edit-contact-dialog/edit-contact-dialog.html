<h2 mat-dialog-title (mousedown)="mouseDown($event)">{{ls.l('ContactInfoDialogTitle', localization.PFMLocalizationSourceName, ls.l(action), data.name)}}</h2>
<mat-dialog-content>
    <dx-validation-group (onInitialized)="initValidationGroup($event)">
        <label>{{ls.l('Type')}}</label>
        <dx-select-box
            name="usageType"
            [dataSource]="types"
            displayExpr="name"
            valueExpr="id"
            [disabled]="!isEditAllowed"
            [(value)]="data.usageTypeId"
            (onValueChanged)="onTypeChanged($event)"
            fieldTemplate="fieldTemplate"
            itemTemplate="itemTemplate">
            <div *dxTemplate="let item of 'fieldTemplate'">
                <div class="type-item-wrapper">
                    <img *ngIf="data.field == 'url'" class="socialIcon" src="./assets/common/icons/social/{{ trim(item.name) }}.svg" onError="this.src='./assets/common/icons/social/OtherLink.svg';" width="25px" height="25px">
                    <dx-text-box class="{{data.field}} type-{{item?.id}}"
                                 [value]="item?.name"
                                 [readOnly]="true"
                                 [hint]="getUsageTypeHint(item)">
                    </dx-text-box>
                </div>
            </div>
            <div *dxTemplate="let item of 'itemTemplate'">
                <div title="{{getUsageTypeHint(item)}}">{{item.name}}</div>
            </div>
            <dx-validator>
                <dxi-validation-rule type="required" [message]="ls.l('TypeRequired')"></dxi-validation-rule>
            </dx-validator>
        </dx-select-box>
        <br>

        <div *ngIf="data.field == 'url'">
            <label>{{ls.l('Link')}}</label>
            <dx-text-box
                name="email"
                [disabled]="!isEditAllowed"
                [(value)]="data.url">
                <dx-validator>
                    <dxi-validation-rule type="required" message="{{ls.l('LinkIsRequired')}}."></dxi-validation-rule>
                    <dxi-validation-rule type="pattern" [pattern]="urlRegEx" message="{{ls.l('LinkIsNotValid')}}."></dxi-validation-rule>
                </dx-validator>
            </dx-text-box>
        </div>

        <div *ngIf="data.field == 'emailAddress'">
            <label>{{ls.l('Email')}}</label>
            <dx-text-box
                name="email"
                [disabled]="!isEditAllowed"
                [(value)]="data.emailAddress">
                <dx-validator>
                    <dxi-validation-rule type="required" message="{{ls.l('EmailIsRequired')}}."></dxi-validation-rule>
                    <dxi-validation-rule type="pattern" [pattern]="emailRegEx" message="{{ls.l('EmailIsNotValid')}}."></dxi-validation-rule>
                </dx-validator>
            </dx-text-box>
        </div>

        <div *ngIf="data.field == 'phoneNumber'">
            <label>{{ls.l('Phone')}}</label>
            <country-phone-number [(phoneNumber)]="data.phoneNumber" #countryPhoneNumber></country-phone-number>
        </div>

        <div *ngIf="data.field == 'phoneNumber'">
            <label>{{ls.l('Extension')}}</label>
            <dx-number-box
                name="phoneExtension"
                [disabled]="!isEditAllowed"
                [(value)]="data.phoneExtension">
                <dx-validator>
                    <dxi-validation-rule type="stringLength" [max]="5" message="{{ls.l('PhoneExtensionExceedsMaxSize')}}"></dxi-validation-rule>
                </dx-validator>
            </dx-number-box>
            <br>
        </div>

        <label>{{ls.l('Comment')}}</label>
        <dx-text-box
            name="comment"
            [disabled]="!isEditAllowed"
            [(value)]="data.comment">
        </dx-text-box>
        <br>

        <p>
            <dx-check-box
                [text]="ls.l('ActiveContact')"
                [disabled]="!isEditAllowed"
                [(value)]="data.isActive">
            </dx-check-box>
            <dx-check-box
                [text]="ls.l('ConfirmedContact')"
                [disabled]="!isEditAllowed"
                [(value)]="data.isConfirmed">
            </dx-check-box>
        </p>
    </dx-validation-group>
</mat-dialog-content>
<mat-dialog-actions>
    <button *ngIf="isEditAllowed && (action=='Edit')" mat-button class="button-layout button-clean-red" (click)="data.deleteItem($event)">
        <i class="delete fa fa-times" aria-hidden="true"></i>{{ls.l('Delete')}}
    </button>
    <button mat-button mat-dialog-close class="button-layout button-default">{{ls.l('Cancel')}}</button>
    <button *ngIf="isEditAllowed" mat-button class="button-layout button-primary" (click)="onSave($event)">{{action == 'Edit' ? ls.l('Update'): action}}</button>
</mat-dialog-actions>
