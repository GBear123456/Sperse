<div *ngIf="!openDocumentMode" class="wrapper">
    <dx-tooltip width="120px"
            [target]="'.dx-state-hover .dx-link.dx-link-edit'"
            [visible]="actionRecordData"
            (onHidden)="actionRecordData = null">
    <div *dxTemplate="let data of 'content'">
        <div class="lists-tooltip-container">
            <dx-list [dataSource]="actionMenuItems"
                (onItemClick)="onMenuItemClick($event)">
            </dx-list>
        </div>
    </div>
    </dx-tooltip>
    <div class="grid-view">
        <dx-data-grid id="gridContainer"
                    height="100%"
                    [dataSource]="dataSource"
                    [allowColumnReordering]="true"
                    [columnAutoWidth]="true"
                    [allowColumnResizing]="true"
                    [hoverStateEnabled]="true"
                    [pager]="defaultGridPagerConfig"
                    (onContentReady)="onContentReady($event)"
                    (onDataErrorOccurred)="httpConfig.handleError($event.error)"
                    (onToolbarPreparing)="onToolbarPreparing($event)"
                    (onEditingStart)="showActionsMenu($event)">
            <dxo-search-panel [visible]="true" [width]="300"></dxo-search-panel>
            <dxo-header-filter [visible]="true" [allowSearch]="true"></dxo-header-filter>
            <dxo-editing mode="popup" [popup]="{onShowing: onShowingPopup, height: '0px', width: '0px'}" [allowUpdating]="true"></dxo-editing>

            <dxi-column [width]="'40px'" [fixed]="true" [fixedPosition]="'left'" [showInColumnChooser]="false" [allowExporting]="false"></dxi-column>

            <dxi-column dataField="size" caption="{{l('DocumentSize')}}" cellTemplate="fileSizeCell"></dxi-column>
            <dxi-column dataField="creationTime" caption="{{l('Date')}}" cssClass="tabular" cellTemplate="dateCell" sortOrder="desc"></dxi-column>
            <dxi-column dataField="fileName" caption="{{l('DocumentReceived')}}"></dxi-column>
            
            <div *dxTemplate="let cellData of 'dateCell'">
                {{cellData.value | date: formatting.dateTime}}
            </div>
            <div *dxTemplate="let cellData of 'fileSizeCell'">
                {{cellData.value | filesize}}
            </div>
            <div *dxTemplate="let data of 'title'">
                <h2 class="title">{{l('Documents')}}</h2>
            </div>

            <dxo-load-panel [enabled]="true"></dxo-load-panel>
            <dxo-scrolling mode="virtual"></dxo-scrolling>

            <dxo-sorting mode="multiple"></dxo-sorting>
            <dxo-group-panel [visible]="false"></dxo-group-panel>
        </dx-data-grid>
    </div>
    <div class="drop-down">
        <h1>{{l('DropYourFile')}}</h1>
        <file-drop 
            (onFileDrop)="fileDropped($event)">
            <p>{{l('DragAndDrop')}}</p>
        </file-drop>
        <p class="alter-text">or <a href="javascript:void(0);"><input name="browseFile" type="file" onclick="this.value = null" (change)="fileSelected($event)">{{l('SelectFileFrom')}}</a></p>
        <div class="file-container">
        </div>
    </div>
</div>
<div *ngIf="openDocumentMode">
    <div class="open-document-header">
        <h4 class="file-name">{{ currentDocumentInfo.fileName }} <span class="file-size">({{ currentDocumentInfo.size | filesize }})</span></h4>
        <span class="close" (click)="closeDocument($event)"></span>
    </div>
    <form id="office_form" name="office_form" target="office_frame" action="{{ wopiUrlsrc }}" method="post">
        <input name="access_token" value="{{ wopiAccessToken }}" type="hidden" />
        <input name="access_token_ttl" value="{{ wopiAccessTokenTtl }}" type="hidden" />
    </form>
    <span id="frameholder" class="wopi-frame-holder"></span>
</div>