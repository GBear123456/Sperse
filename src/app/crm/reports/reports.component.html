<app-headline icon="briefcase"
              [names]="[ ls.l('Reports') ]"
              [showToggleToolbarButton]="true"
              [showToggleCompactViewButton]="true"
              [showReloadButton]="showReload"
              (onToggleCompactView)="toggleContactView()"
              (onToggleToolbar)="toggleToolbar()"
              (onReload)="reload()">
    <import-progress-bar></import-progress-bar>
</app-headline>
<app-toolbar [config]="toolbarConfig" [hidden]="appService.toolbarIsHidden$ | async"></app-toolbar>
<div class="main-wrapper" [ngStyle]="{ height: 'calc(100% - ' + (appService.toolbarIsHidden.value ? '75px' : '136px' ) + ')' }">
    <ghost-list *ngIf="!isDataLoaded"></ghost-list>
    <div [hidden]="totalCount <= 0">
        <dx-data-grid #ordersGrid
                      id="gridContainer"
                      class="main-component-view"
                      accesskey="narrowHeaderPanel"
                      [dataSource]="dataSource"
                      [allowColumnReordering]="true"
                      [columnAutoWidth]="true"
                      [allowColumnResizing]="true"
                      [hoverStateEnabled]="true"
                      [loadPanel]="{ enabled: false }"
                      [remoteOperations]="{ filtering: false }"
                      [pager]="defaultGridPagerConfig"
                      (onContentReady)="onContentReady()"
                      (onDataErrorOccurred)="httpInterceptor.handleError($event.error)">
            <dxo-selection selectAllMode="page"
                           showCheckBoxesMode="always"
                           mode="multiple">
            </dxo-selection>
            <dxo-sorting mode="multiple"></dxo-sorting>
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxo-paging [pageSize]="20"></dxo-paging>

            <dxi-column dataField="name" [caption]="ls.l('Customer.Name')" cssClass="clipboard-holder"></dxi-column>
            <dxi-column dataField="email" [caption]="ls.l('Contact.Email')" cssClass="clipboard-holder"></dxi-column>
            <dxi-column [caption]="ls.l('Contact.Phone')" [calculateDisplayValue]="customizePhoneCell" cssClass="clipboard-holder"></dxi-column>
            <dxi-column dataField="city" [caption]="ls.l('Contact.City')" cssClass="clipboard-holder"></dxi-column>
            <dxi-column dataField="status" [caption]="ls.l('Status')" [calculateDisplayValue]="customizeStatusCell" cellTemplate="statusCell"></dxi-column>
            <dxi-column dataField="bankCode"
                        cellTemplate="bankCodeCell"
                        [caption]="ls.l('BankCode')">
            </dxi-column>
            <dxi-column dataField="created"
                        [caption]="ls.l('Created')"
                        [calculateDisplayValue]="customizeCreatedCell"
                        cssClass="clipboard-holder">
            </dxi-column>
            <dxi-column dataField="bankPassFee"
                        [caption]="ls.l('BankPassFee')"
                        cssClass="clipboard-holder"
                        [calculateDisplayValue]="customizeBankPassFeeCell">
            </dxi-column>
            <dxi-column dataField="bankVaultFee"
                        [caption]="ls.l('BankVaultFee')"
                        cssClass="clipboard-holder"
                        [calculateDisplayValue]="customizeBankVaultFeeCell">
            </dxi-column>
            <dxi-column dataField="wtbFee"
                        [caption]="ls.l('WtbFee')"
                        cssClass="clipboard-holder"
                        [calculateDisplayValue]="customizeWtbFeeCell">
            </dxi-column>
            <dxi-column dataField="total"
                        [caption]="ls.l('Total')"
                        cssClass="clipboard-holder"
                        [calculateDisplayValue]="customizeTotalCell">
            </dxi-column>
            <div *dxTemplate="let cellData of 'bankCodeCell'">
                <bank-code-letters [bankCode]="cellData.value"></bank-code-letters>
            </div>
            <div *dxTemplate="let cellData of 'statusCell'">
                <div [class]="'client-status ' + cellData.value | lowercase">
                    {{ cellData.displayValue }}
                </div>
            </div>
        </dx-data-grid>
    </div>
    <app-no-data
        [hidden]="!isDataLoaded || totalCount"
        [showLink]="false">
    </app-no-data>
</div>