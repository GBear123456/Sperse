<div [@routerTransition]>
    <app-headline [names]="[ l('Interactive API Documentation') ]"
                  iconSrc="assets/common/icons/api-icon.svg">
    </app-headline>
    <div class="content">
        <setup-steps></setup-steps>
        <dx-scroll-view showScrollbar="onHover" [height]="scrollHeight" width="100%">
            <i class="info-tooltip fa fa-info"
               id="infoTarget"
               (mouseenter)="showTooltip()">
            </i>
            <dx-tooltip target="#infoTarget"
                        [(visible)]="toggleTooltip"
                        [width]="370"
                        [height]="140"
                        [closeOnOutsideClick]="true">
                <div *dxTemplate="let data = data of 'content'">
                    <div class="tooltip-data">
                        <h6>{{l('Api_Intro_Text')}}:</h6>
                        <ul>
                            <li><b>{{l('API_Api-Key')}}:</b> XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX</li>
                            <li><b>{{l('Accept')}}:</b> {{l('API_Application-Json')}}</li>
                            <li><b>{{l('API_Content_Type')}}:</b> {{l('API_Application-Json')}}</li>
                        </ul>
                        <h6>{{l('Api_Intro_Text_2')}}</h6>
                    </div>
                </div>
            </dx-tooltip>
            <div class="api-into portlet light no-padding margin-bottom-0">
                <api-welcome (onAddApiKey)="addApiKey()" [small]="apiKeys"></api-welcome>
                <div *ngIf="apiKeys">
                    <dx-data-grid id="gridContainer"
                                  keyExpr="id"
                                  [dataSource]="apiKeys">
                        <dxi-column dataField="name" [caption]="l('ApiKey_Name')" cssClass="clipboard-holder"></dxi-column>
                        <dxi-column dataField="key" [caption]="l('ApiKey_Key')" cellTemplate="keyTemplate" [width]="400"></dxi-column>
                        <dxi-column dataField="expirationDate" [caption]="l('ApiKey_ExpirationDate')" dataType="date" [width]="150" cssClass="clipboard-holder"></dxi-column>
                        <dxi-column dataField="creationTime" [caption]="l('CreationTime')" dataType="date" [width]="150" cssClass="clipboard-holder"></dxi-column>
                        <dxi-column dataField="userName" [caption]="l('UserName')" cssClass="clipboard-holder"></dxi-column>
                        <dxi-column [width]="100" [allowFiltering]="false" [allowSorting]="false" [allowReordering]="false" [visible]="canManageApiKeys" cellTemplate="editDeleteTemplate"></dxi-column>
                        <div *dxTemplate="let data of 'editDeleteTemplate'">
                            <a class="dx-link" (click)="deleteApiKey(data)">{{l('Delete')}}</a>
                        </div>
                        <div *dxTemplate="let data of 'keyTemplate'" class="key-container">
                            <span [title]="data.data.key">{{data.data.key}}</span>
                            <i class="fa fa-copy" (click)="copyToClipboard(data.data.key)"></i>
                        </div>
                    </dx-data-grid>
                </div>
            </div>
        </dx-scroll-view>
    </div>
</div>
