<h2 md-dialog-title (mousedown)="mouseDown($event)">{{l('ContactInfoDialogTitle', l(action), data.name)}}</h2>
<md-dialog-content>
  <dx-validation-group (onInitialized)="initValidationGroup($event)">
    <label>{{l('Type')}}</label>
    <dx-select-box
      name="usageType"
      [dataSource]="types"
      displayExpr="name"
      valueExpr="id"
      [(value)]="data.usageTypeId"
      (onValueChanged)="onTypeChanged($event)"
      fieldTemplate="fieldTemplate">
      <div *dxTemplate="let item of 'fieldTemplate'">
        <div class="type-item-wrapper ">
          <dx-text-box class="{{data.field}} type-{{item?.id}}"
            [value]="item?.name"
            [readOnly]="true">
          </dx-text-box>
        </div>
      </div>

      <dx-validator>
        <dxi-validation-rule type="required" message="{{l('TypeRequired')}}"></dxi-validation-rule>
      </dx-validator>
    </dx-select-box><br>

    <div *ngIf="data.field == 'url'">
      <label>{{l('Link')}}</label>
      <dx-text-box 
        name="email"
        [(value)]="data.url">
        <dx-validator>
          <dxi-validation-rule type="required" message="{{l('LinkIsRequired')}}."></dxi-validation-rule>
          <dxi-validation-rule type="pattern" pattern="(http|https)://[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?" message="{{l('LinkIsNotValid')}}."></dxi-validation-rule>
        </dx-validator>
      </dx-text-box>
    </div>

    <div *ngIf="data.field == 'emailAddress'">
      <label>{{l('Email')}}</label>
      <dx-text-box 
        name="email"
        [(value)]="data.emailAddress">
        <dx-validator>
          <dxi-validation-rule type="required" message="{{l('EmailIsRequired')}}."></dxi-validation-rule>
          <dxi-validation-rule type="email" message="{{l('EmailIsNotValid')}}."></dxi-validation-rule>
        </dx-validator>
      </dx-text-box>
    </div>

    <div *ngIf="data.field == 'phoneNumber'">
      <label>{{l('Phone')}}</label>
      <dx-text-box      
        name="phone"
        maskInvalidMessage="{{l('PhoneValidationError')}}"
        [(value)]="data.phoneNumber"
        (onFocusOut)="blurInput($event)"
        (onFocusIn)="focusInput($event)">
        <dx-validator>
          <dxi-validation-rule type="required" message="{{l('PhoneIsRequired')}}."></dxi-validation-rule>
        </dx-validator>
      </dx-text-box><br>

      <label>{{l('Extension')}}</label>
      <dx-number-box
        name="phoneExtension"
        [(value)]="data.phoneExtension">
      </dx-number-box><br>
    </div>

    <label>{{l('Comment')}}</label>
    <dx-text-box 
      name="comment"
      [(value)]="data.comment">
    </dx-text-box><br>

    <p>
      <dx-check-box
        text="{{l('ConfirmedContact', [data.name])}}"
        [(value)]="data.isConfirmed">
      </dx-check-box>
      &nbsp;&nbsp;&nbsp;
      <dx-check-box
        text="{{l('ActiveContact', [data.name])}}"
        [(value)]="data.isActive">
      </dx-check-box>
    </p>
  </dx-validation-group>
</md-dialog-content>
<md-dialog-actions>
  <button md-button class="button-layout button-clean-red" (click)="data.deleteItem($event)" *ngIf="action=='Edit'">
    <i class="delete fa fa-times" aria-hidden="true"></i>{{l('Delete')}}
  </button>
  <button md-button md-dialog-close class="button-layout button-default">{{l('Cancel')}}</button>
  <button md-button class="button-layout button-primary" (click)="onSave($event)">{{action == 'Edit' ? l('Update'): action}}</button>
</md-dialog-actions>