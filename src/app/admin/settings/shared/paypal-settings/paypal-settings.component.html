<h2><img width="140" src="./assets/common/images/paypal.svg" /></h2>

<div class="form-group">
    <dx-check-box id="PaypalIsEnabled"
                  [text]="l('Enabled')"
                  [(value)]="paypalPaymentSettings.isEnabled">
    </dx-check-box>
</div>
<mat-tab-group *ngIf="paypalPaymentSettings">
    <mat-tab>
        <ng-template mat-tab-label>
            <img src="./assets/common/icons/house.svg">
            <div class="title">PAYPAL INTRODUCTION</div>
        </ng-template>
        <div class="container-fluid introduction-tab">
            <div class="row">
                <div class="col-12 col-lg-8">
                    <div class="take-payments-header">
                        <div>
                            <h3>Accept PayPal Payments</h3>
                            <span>Connect with the world's most powerful and easy to use Payment Gateway</span>
                        </div>
                        <button *ngIf="paypalPaymentSettings.isHostAccountEnabled && !paypalPaymentSettings.merchantId" class="btn btn-layout stripe-button" (click)="createConnectedAccount()">
                            {{ l('Connect to Paypal') }}
                        </button>
                    </div>
                    <div class="video-block">
                        <img src="./assets/common/images/workingman.jpg">
                        <div class="video-block-text">
                            <div class="video-block-title">Now your customers can pay by card</div>
                            <ul>
                                <li>Take instant online card payments</li>
                                <li>Get your money quickly and securely</li>
                                <li>Choose which invoices can be paud this way</li>
                            </ul>
                            <div class="video-block-learnmore">
                                <a target="_blank" href="https://www.paypal.com/us/digital-wallet/how-paypal-works">Learn more about how PayPal works<i class="fa fa-long-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="payments-block">
                        <h2>Connect PayPal collect payments from customers worldwide!</h2>
                        <h3>Only pay a small percentage of your invoice total:</h3>
                        <ul>
                            <li>Accept all Major Credit Cards</li>
                            <li>Flexible subsrcriptions and billing terms</li>
                            <li>Accept SEPA</li>
                            <li>Accept Apple Pay</li>
                            <li>Accept iDeal</li>
                            <li>Fraud prevention tools</li>
                        </ul>
                    </div>
                </div>
                <div class="col-12 col-lg-4 faq-block">
                    <div class="faq-block-title">FAQ</div>
                    <div class="faq-block-row">
                        <img src="./assets/common/icons/document-text.svg" />
                        <a target="_blank" href="https://www.paypal.com/c2/webapps/mpp/how-to-guides/how-to-use-paypal">Whatâ€™s Paypal and how do I get started?</a>
                    </div>
                </div>
            </div>
        </div>
    </mat-tab>
    <mat-tab *ngIf="!isHost && paypalPaymentSettings.merchantId">
        <ng-template mat-tab-label>
            <img src="./assets/common/icons/peoples.svg">
            <div class="title">CONNECTED ACCOUNT</div>
        </ng-template>
        <div class="connected-tab blocks-tab">
            <div class="connected-account block" [class.active]="isMerchantConnected">
                <div class="section top-bar">
                    <i class="fa check-icon" [ngClass]="isMerchantConnected ? 'fa-check-circle' : 'fa-circle-thin'"></i>
                    <span class="name-title">{{paypalPaymentSettings.merchantLegalName}}</span>
                </div>
                <div class="section account-info">
                    <div class="stripe-button-container">
                        <button class="btn btn-layout paypal-button">
                            {{ isMerchantConnected ? l('Connected with') : l('Finish onboarding with') }}
                            <img width="100" src="./assets/common/images/paypal.svg" />
                        </button>
                    </div>
                    <div class="account-details">
                        <h6>{{l("Merchant account info")}}:</h6>
                        <div class="clipboard-holder"><span>Merchant Id: </span><b>{{paypalPaymentSettings.merchantId}}</b><i class="copy save-to-clipboard" aria-hidden="true" (click)="copyToClipboard(paypalPaymentSettings.merchantId)"></i></div>
                        <div class="clipboard-holder"><span>Legal Name: </span><b>{{paypalPaymentSettings.merchantLegalName}}</b><i class="copy save-to-clipboard" (click)="copyToClipboard(paypalPaymentSettings.merchantLegalName)"></i></div>
                        <div class="clipboard-holder"><span>Merchant Email: </span><b>{{paypalPaymentSettings.merchantEmail}}</b><i class="copy save-to-clipboard" (click)="copyToClipboard(paypalPaymentSettings.merchantEmail)"></i></div>
                    </div>
                </div>
                <div class="account-actions">
                    <span (click)="unlinkMerchant()"><i class="fa fa-trash-o"></i>Unlink Connection</span>
                </div>
            </div>
        </div>
    </mat-tab>
    <mat-tab>
        <ng-template mat-tab-label>
            <img src="./assets/common/icons/blocks.svg">
            <div class="title">API KEY</div>
        </ng-template>
        <div class="api-keys-tab blocks-tab">
            <div class="api-key-account block">
                <div class="form-group">
                    <label for="PayPalEnvironment">{{l("PayPal environment")}}</label>
                    <dx-select-box class="bold-text"
                                   stylingMode="outlined"
                                   valueExpr="value"
                                   displayExpr="text"
                                   [showClearButton]="true"
                                   [(value)]="paypalPaymentSettings.environment"
                                   [dataSource]="payPalEnvironments">
                    </dx-select-box>
                </div>
                <div class="form-group">
                    <label for="PayPalClientId">{{l("Client ID")}}</label>
                    <input id="PayPalClientId" type="text" name="PayPalClientId" class="form-control" [(ngModel)]="paypalPaymentSettings.clientId">
                </div>
                <div class="form-group">
                    <label for="PayPalClientSecret">{{l("Client Secret")}}</label>
                    <input id="PayPalClientSecret" type="text" name="PayPalClientSecret" class="form-control" [(ngModel)]="paypalPaymentSettings.clientSecret">
                </div>
                <div *ngIf="isHost" class="form-group">
                    <label for="BNCode">{{l("BN Code")}}</label>
                    <input id="BNCode" type="text" name="BNCode" class="form-control" [(ngModel)]="paypalPaymentSettings.bnCode" maxlength="128">
                </div>
                <div *ngIf="isHost" class="form-group">
                    <label for="HostMerchantId">{{l("Merchant Id")}}</label>
                    <input id="HostMerchantId" type="text" name="HostMerchantId" class="form-control" [(ngModel)]="paypalPaymentSettings.hostMerchantId" maxlength="128">
                </div>
                <div class="form-group">
                    <label for="PayPalWebhookKey">{{l("Webhook Id")}}</label>
                    <input id="PayPalWebhookKey" type="text" name="PayPalWebhookKey" class="form-control" [(ngModel)]="paypalPaymentSettings.webhookKey" maxlength="128">
                </div>
                <p>
                    <span class="small">* To recieve webhooks from PayPal please add new endpoint on your application using the following info and save Webhook Id in the field above:</span><br />
                    <span class="small">URL - <span class="copy-url"><b>{{getPayPalWebhookUrl()}}</b><i class="copy save-to-clipboard" (click)="copyToClipboard($event)"></i></span></span><br />
                    <span class="small">
                        Events -
                        <b>'Billing subscription activated'</b>, <b>'Billing subscription cancelled'</b>, <b>'Payment sale completed'</b>, <b>'Payment sale refunded'</b>,
                        <b>'Payment capture completed'</b>, <b>'Payment capture refunded'</b>,
                        <b>'Payment payouts-item succeeded'</b>, <b>'Payment payouts-item failed'</b>, <b>'Payment payouts-item unclaimed'</b>
                        <b *ngIf="isHost">, 'Merchant onboarding completed', 'Merchant partner-consent revoked'</b>
                    </span>
                </p>
            </div>
        </div>
    </mat-tab>
</mat-tab-group>