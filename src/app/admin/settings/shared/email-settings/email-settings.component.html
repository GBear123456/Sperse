<h2>{{l('Email')}} {{l('Settings')}}</h2>
<div *ngIf="emailSettings">
    <div class="smtp-error-block" *ngIf="smtpProviderErrorLink">
        <a [href]="smtpProviderErrorLink" target="blank">{{l("CheckProviderRecommendation")}}</a>
    </div>
    <div class="form-group">
        <label for="DefaultFromAddress">{{l("DefaultFromAddress")}}</label>
        <input id="DefaultFromAddress" type="email" name="DefaultFromAddress" class="form-control"
               [ngClass]="{'edited':emailSettings.defaultFromAddress}"
               [(ngModel)]="emailSettings.defaultFromAddress" maxlength="100">
    </div>
    <div class="form-group">
        <label for="DefaultFromDisplayName">{{l("DefaultFromDisplayName")}}</label>
        <input id="DefaultFromDisplayName" type="text" name="DefaultFromDisplayName" class="form-control"
               [ngClass]="{'edited':emailSettings.defaultFromDisplayName}"
               [(ngModel)]="emailSettings.defaultFromDisplayName" maxlength="100">
    </div>
    <div *ngIf="!isHost" class="form-group">
        <label for="DefaultReplyTo">{{l("DefaultReplyTo")}}</label>
        <input id="DefaultReplyTo" type="text" name="DefaultReplyTo"
               class="form-control" [ngClass]="{'edited':emailSettings.defaultReplyTo}"
               [(ngModel)]="emailSettings.defaultReplyTo" maxlength="100" [attr.disabled]="showCustomSmptSettings ? '' : null">
    </div>
    <div *ngIf="!isHost">
        <dx-check-box id="ShowCustomSmtp"
                      [text]="l('Show SMTP settings')"
                      [(value)]="showCustomSmptSettings"
                      (change)="showCustomSmptSettings = !showCustomSmptSettings">
        </dx-check-box>
        <br />
    </div>
    <div [hidden]="!showCustomSmptSettings">
        <div class="form-group">
            <label for="provider">{{l("Provider")}}</label>
            <dx-select-box
                [showClearButton]="true"
                [dataSource]="supportedProviders"
                displayExpr="name"
                [(value)]="selectedProvider"
                (onValueChanged)="onProviderChanged()">
            </dx-select-box>
        </div>
        <div class="form-group">
            <label for="SmtpHost">{{l("SmtpHost")}}</label>
            <input id="SmtpHost" type="text" name="SmtpHost" class="form-control" [ngClass]="{'edited':emailSettings.smtpHost}"
                   [(ngModel)]="emailSettings.smtpHost"
                   maxlength="64">
        </div>
        <div class="form-group">
            <label for="SmtpPort">{{l("SmtpPort")}}</label>
            <input id="SmtpPort" type="number" name="SmtpPort" class="form-control"
                   [ngClass]="{'edited':emailSettings.smtpPort}" [(ngModel)]="emailSettings.smtpPort"
                   maxlength="5">
        </div>

        <div class="checkbox-list">
            <div class="form-group">
                <dx-check-box id="Settings_SmtpEnableSsl"
                              [text]="l('UseSsl')"
                              [(value)]="emailSettings.smtpEnableSsl">
                </dx-check-box>
            </div>
        </div>

        <div class="form-group">
            <label for="SmtpDomainName">{{l("DomainName")}}</label>
            <input id="SmtpDomainName" type="text" name="SmtpDomainName" class="form-control"
                   [ngClass]="{'edited':emailSettings.smtpDomain}"
                   [(ngModel)]="emailSettings.smtpDomain" maxlength="128">
        </div>
        <div class="form-group">
            <label for="SmtpUserName">{{l("UserName")}}</label>
            <input id="SmtpUserName" type="text" name="SmtpUserName" class="form-control"
                   [ngClass]="{'edited':emailSettings.smtpUserName}"
                   [(ngModel)]="emailSettings.smtpUserName" maxlength="128">
        </div>
        <div class="form-group">
            <label for="SmtpPassword">{{l("Password")}}</label>
            <input type="text" class="hidden-field">
            <input type="password" class="hidden-field">
            <input id="SmtpPassword" type="password" name="SmtpPassword" class="form-control"
                   [ngClass]="{'edited':emailSettings.smtpPassword}" [(ngModel)]="emailSettings.smtpPassword"
                   maxlength="128" autocomplete="off">
        </div>
        <h5>{{l("TestEmailSettingsHeader")}}</h5>
        <div class="row">
            <div class="form-group col-md-4">
                <input type="text" class="form-control input-mini" [(ngModel)]="testEmailAddress">
            </div>
            <div class="form-group col-md-2">
                <button class="btn btn-layout" type="button" (click)="sendTestEmail()">{{l("SendTestEmail")}}</button>
            </div>
        </div>
        <br />
        <div>
            <dx-check-box id="Settings_Imap_IsEnabled"
                          [text]="l('AllowImapSynchronization')"
                          [(value)]="emailSettings.isImapEnabled">
            </dx-check-box>
        </div>
        <br />
        <div class="form-group" [hidden]="!emailSettings.isImapEnabled">
            <label for="ImapHost">{{l("ImapHost")}}</label>
            <input id="ImapHost" type="text" name="ImapHost" class="form-control" [ngClass]="{'edited':emailSettings.imapHost}" [(ngModel)]="emailSettings.imapHost" maxlength="128">
        </div>
        <div class="form-group" [hidden]="!emailSettings.isImapEnabled">
            <label for="ImapPort">{{l("ImapPort")}}</label>
            <input id="ImapPort" type="number" name="ImapPort" class="form-control" [ngClass]="{'edited':emailSettings.imapPort}" [(ngModel)]="emailSettings.imapPort" maxlength="5">
        </div>
        <div [hidden]="!emailSettings.isImapEnabled">
            <dx-check-box id="Settings_Imap_UseSsl"
                          [text]="l('ImapUseSsl')"
                          [(value)]="emailSettings.imapUseSsl">
            </dx-check-box>
            <br />
        </div>
    </div>
</div>