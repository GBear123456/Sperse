<div id="paymentWizardComponent" #wizard>
    <mat-dialog-content>
        <mat-horizontal-stepper #stepper>
            <mat-step>
                <package-chooser
                    *ngIf="!subscriptionIsLocked"
                    [title]="data?.title"
                    [module]="module"
                    [showBackground]="true"
                    [showDowngradeLink]="!subscriptionIsFree"
                    (onPlanChosen)="changePlan($event)"
                    (moveToNextStep)="moveToPaymentOptionsStep()">
                </package-chooser>
                <div *ngIf="subscriptionIsLocked" class="rejectSubscriptionBlock">
                    <h2 class="title">{{ l('ManualBankTransferIsNotConfirmed') }}</h2>
                    <h3 *ngIf="trackingCode">{{ l('YourTrackingCodeIs') }}: {{ trackingCode }}</h3>
                    <button (click)="rejectPendingPayment()" class="btn btn-layout">{{ l('ManualSubscriptionReject') }}</button>
                </div>
            </mat-step>
            <mat-step>
                <ng-container *ngIf="(plan$ | async) as plan">
                    <payment-options
                        [plan]="plan"
                        (onChangeStep)="stepper.selectedIndex = $event"
                        (onClose)="close()"
                        (onStatusChange)="changeStatus($event)"
                        (refreshAfterClose)="refreshAfterClose = true">
                    </payment-options>
                </ng-container>
            </mat-step>
            <mat-step>
                <ng-container *ngIf="paymentStatusData">
                    <payment-status [paymentStatusData]="paymentStatusData" (onClose)="close()"></payment-status>
                </ng-container>
            </mat-step>
        </mat-horizontal-stepper>
    </mat-dialog-content>
</div>
