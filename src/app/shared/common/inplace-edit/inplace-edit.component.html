<div *ngIf="hasValue && label">{{ label }}</div>
<div [hidden]="isEditModeEnabled"
     class="inplace-edit-view-mode {{multiline ? 'multiline': ''}}"
     (click)="setEditModeEnabled(true, $event)">
    <span class="link" [ngClass]="{ 'placeholder': !hasValue }" [attr.title]="link">
        <a (click)="onLinkClick($event, link)" [attr.href]="link" [attr.title]="displayValue || value || editPlaceholder" target="_blank" #editText>
            <ng-container *ngIf="format?.style == 'currency'; else plaine">{{displayValue || (value | currency: format.currency) || editPlaceholder}}</ng-container>
            <ng-template #plaine>{{displayValue || value || editPlaceholder}}</ng-template>
        </a>
    </span>
    <div class="actions {{ buttonsPosition }}" [ngClass]="{ empty: !displayValue && !hasValue && !editPlaceholder}">
        <i *ngIf="isEditEnabled && isEditDialogEnabled"
           [ngClass]="{ hidden: isReadOnlyField }"
           class="edit fa fa-pencil"
           aria-hidden="true"
           (click)="showDialog($event)">
        </i>
        <i *ngIf="isEditEnabled && showInlineEditButton"
           [ngClass]="{ hidden: isReadOnlyField }"
           class="edit fa fa-pencil"
           aria-hidden="true"
           (click)="showInput(true)">
        </i>
        <i *ngIf="isHistoryEnabled"
           [ngClass]="{ hidden: isReadOnlyField }"
           class="history dx-icon-clock"
           aria-hidden="true"
           [title]="l('History')"
           (click)="historyClick($event)">
        </i>
        <i *ngIf="isDeleteEnabled && hasValue"
           [ngClass]="{ hidden: isReadOnlyField }"
           class="delete fa fa-times"
           aria-hidden="true"
           (click)="deleteItem($event)">
        </i>
        <i *ngIf="isCopyEnabled && hasValue"
           class="save-to-clipboard"
           aria-hidden="true"
           [title]="l('Copy')"
           (click)="copyItem($event)">
        </i>
    </div>
</div>
<div *ngIf="!isReadOnlyField && isEditModeEnabled" class="inplace-edit-edit-mode {{multiline ? 'multiline': ''}}">
    <dx-text-area *ngIf="multiline"
        width="calc(100% - 70px)"
        [placeholder]="editPlaceholder"
        [(value)]="valueOriginal"
        [autoResizeEnabled]="true"
        (onInitialized)="onTextAreaInitialized($event)">
        <dx-validator [validationRules]="validationRules || []"></dx-validator>
    </dx-text-area>
    <dx-text-box *ngIf="!multiline && !format"
        width="calc(100% - 70px)"
        [placeholder]="editPlaceholder"
        [(value)]="valueOriginal"
        [maskInvalidMessage]="maskInvalidMessage"
        [maxLength]="maxLength"
        (onFocusIn)="onFocusIn($event)"
        (onEnterKey)="onEnterKey()"
        (onFocusOut)="onFocusOut($event)">
        <dx-validator [validationRules]="validationRules || []"></dx-validator>
    </dx-text-box>
    <dx-number-box *ngIf="!multiline && format"
        [min]="0" 
        width="calc(100% - 70px)"
        [placeholder]="editPlaceholder" 
        [format]="format"
        [step]="0"
        [(value)]="valueOriginal"
        (onFocusIn)="onFocusIn($event)"
        (onEnterKey)="onEnterKey()"
        (onFocusOut)="onFocusOut($event)">
        <dx-validator [validationRules]="validationRules || []"></dx-validator>
    </dx-number-box>
    <div class="edit-buttons" [ngClass]="buttonsPosition">
        <dx-button *ngIf="showUpdateButton"
                   class="button-update"
                   icon="todo"
                   (onClick)="updateItem()">
        </dx-button>
        <dx-button *ngIf="showRefreshButton"
                   class="button-exit"
                   icon="refresh"
                   (onClick)="setEditModeEnabled(false)">
        </dx-button>
    </div>
</div>
