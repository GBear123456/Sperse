<dx-tooltip height="440px"
            [target]="targetSelector"
            [(visible)]="tooltipVisible">
    <div *dxTemplate="let data of 'content'">
        <div #tooltipContainer class="lists-tooltip-container">
            <div class="actions clearfix">
                <span class="title">{{ls.l('AssignTo')}}</span>
                <span class="filter-clear" [hidden]="!filterModel?.items?.element?.value?.length" (click)="applyFilter($event)">{{ls.l('ClearFilter')}}</span>
                <div [hidden]="hideButtons || bulkUpdateMode && !selectedKeys?.length">
                    <span class="filter-clear"
                          [class.disabled]="!(isRelatedUser || checkPermissions())"
                          (click)="clear()">
                        {{ls.l('Remove')}}
                    </span>
                    <span class="filter-apply"
                          [class.disabled]="!(isRelatedUser || checkPermissions()) || !userslist.selectedItems?.length"
                          (click)="apply()">
                        {{ls.l('Apply')}}
                    </span>
                </div>
            </div>
            <dx-list #userslist
                height="350"
                [searchEnabled]="true"
                searchExpr="name"
                [selectionMode]="selectionMode || multiSelection || (bulkUpdateMode && !selectedKeys?.length ? 'none' : 'single')"
                [showSelectionControls]="true"
                [dataSource]="list"
                [keyExpr]="'id'"
                [(selectedItemKeys)]="selectedItemKeys"
                (onContentReady)="onContentReady()"
                (onInitialized)="onInitialized($event)"
                (onSelectionChanged)="onSelectionChange($event)">
                <div *dxTemplate="let data of 'item'">
                    <div class="item-row" data-id="{{data.id}}">
                        <div class="user">
                            <img [src]="data.photoThumbnailId ? profileService.getProfilePictureUrl(data.photoThumbnailId) : profileService.getContactPhotoUrl(data.photoPublicId, true)" onerror="this.src='assets/common/images/no-photo.png';" alt="Person Photo">
                            <span class="item-name">{{data.name}}<span *ngIf="!data.isActive"> (inactive)</span></span>
                        </div>
                        <a *ngIf="filterModel" class="dx-link dx-link-filter" [title]="ls.l('Filter')" (click)="applyFilter($event, data)"></a>
                    </div>
                </div>
            </dx-list>
        </div>
    </div>
</dx-tooltip>
