<div class="page-logo" *ngIf="layoutService.showPageLogo">
    <a (click)="logoClick()">
        <img *ngIf="!appSessionService.tenant || !appSessionService.tenant.logoId" src="./assets/common/images/sperse-logo.png" alt="logo" class="logo-layout"/>
        <img *ngIf="appSessionService.tenant && appSessionService.tenant.logoId"
             [src]="remoteServiceBaseUrl + '/api/TenantCustomization/GetLogo?logoId=' + appSessionService.tenant.logoId"
             alt="logo"
             class="logo-layout"/>
    </a>
</div>

<platform-select></platform-select>

<div class="nav-menu" *ngIf="navbarItems">
    <dx-menu
        [width]="width"
        [dataSource]="navbarItems"
        [selectByClick]="true"
        [selectionMode]="'single'"
        [hoverStateEnabled]="true"
        orientation="vertical"
        [selectByClick]="true"
        [adaptivityEnabled]="true"
        [(selectedItem)]="selectedItem"
        [hideSubmenuOnMouseLeave]="true"
        [showFirstSubmenuMode]="{ name: 'onHover', delay: { hide: 200, show: 600 }}"
        [showSubmenuMode]="{ name: 'onHover', delay: { hide: 200, show: 0 }}"
        (onSubmenuShowing)="onSubmenuShowing($event)"
        (onSubmenuHiding)="onSubmenuHiding($event)"
        (onItemClick)="navigate($event)">
        <div *dxTemplate="let data of 'item'" [title]="data.text">
            <img *ngIf="!data.params" [src]="data.icon"><span class="caption" style="padding: 10px 0;" *ngIf="!!data.params || expanded || isSubMenuOpen">{{data.text}}</span><span class="triangle" *ngIf="!data.params && data?.items?.length">&#9658;</span>
        </div>
    </dx-menu>
</div>

<user-management-list>
    <li *ngIf="userManagementService.notificationEnabled && layoutService.showNotificationsButton"
        headerNotifications
        class="{{layoutService.showTopBar ? 'm-dropdown--align-right' : 'm-dropdown--align-left m-dropdown--up'}} m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-right m-dropdown--mobile-full-width"
        data-dropdown-toggle="click"
        data-dropdown-persistent="true"
        id="header_notification_bar">
    </li>

    <li *ngIf="isChatEnabled && !isChatConnected && layoutService.showChatButton"
        class="m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-center  m-dropdown--mobile-full-width">
        <a href="javascript:;" class="m-nav__link">
            <span class="m-nav__link-icon">
                <img *ngIf="!isChatConnected" src="./assets/common/images/loading.gif" style="width: 23px;" [tooltip]="ls.l('ChatIsConnecting')" placement="left"/>
            </span>
        </a>
    </li>
    <li *ngIf="isChatEnabled && isChatConnected && layoutService.showChatButton"
        (click)="quickSideBarChat.toggle()"
        class="m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-center  m-dropdown--mobile-full-width">
        <a href="javascript:;" class="m-nav__link m-dropdown__toggle">
            <span class="m-nav__link-icon">
                <img [src]="'./assets/common/icons/feedback' + (customLayoutType ? '-' + customLayoutType: '')  + '.svg'">
            </span>
            <span class="m-badge m-badge--danger" [ngClass]="{'d-none': !unreadChatMessageCount}" id="UnreadChatMessageCount">{{unreadChatMessageCount}}</span>
        </a>
    </li>

    <user-dropdown-menu *ngIf="layoutService.showUserProfileMenu"
                        [subtitle]="userCompany$ | async"
                        [dropdownMenuItems]="dropdownMenuItems">
    </user-dropdown-menu>
</user-management-list>