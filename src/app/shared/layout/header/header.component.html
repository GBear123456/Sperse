<div class="page-header navbar navbar-fixed-top md-shadow-zero-light">
  <div class="page-header-inner">
    <div class="page-logo" *ngIf="layoutService.showPageLogo">
      <a (click)="logoClick()">
        <img
          *ngIf="!appSession.appearanceConfig || !appSession.appearanceConfig.logoId"
          src="./assets/common/images/sperse-logo.png"
          alt="logo"
          class="logo-layout"
        />
        <img
          *ngIf="appSession.appearanceConfig && appSession.appearanceConfig.logoId"
          [src]="
            remoteServiceBaseUrl +
            '/api/TenantCustomization/GetLogo?logoId=' +
            appSession.appearanceConfig.logoId
          "
          alt="logo"
          class="logo-layout"
        />
      </a>
    </div>

    <clients-navigation *ngIf="isContactDetailRoute()"></clients-navigation>
    <global-search
      *ngIf="showGlobalSearch || isContactDetailRoute()"
      [ngClass]="{
        'global-search': !isContactDetailRoute(),
        'contact-info-panel-search': isContactDetailRoute()
      }"
    ></global-search>

    <ng-container *ngIf="layoutService.showTopBar && !isContactDetailRoute()">
      <contact-info-panel
        *ngIf="appService.showContactInfoPanel$ | async"
        [data]="appService.contactInfo"
      ></contact-info-panel>
      <user-management-list>
        <li
          *ngIf="languages.length"
          class="m-nav__item m-dropdown m-dropdown--large m-dropdown--arrow m-dropdown--align-center m-dropdown--mobile-full-width m-dropdown--skin-light m-list-search m-list-search--skin-light m-dropdown--open dropdown-language"
        >
          <a
            href="javascript:;"
            class="m-nav__link m-dropdown__toggle"
            data-toggle="dropdown"
            data-hover="dropdown"
            data-close-others="true"
          >
            <i [class]="currentLanguage.icon"></i>
            <span class="m-menu__link-text langname">
              {{ currentLanguage.displayName }}
            </span>
            <i class="fa fa-angle-down"></i>
          </a>
          <ul class="dropdown-menu">
            <li *ngFor="let language of languages">
              <a href="javascript:;" (click)="changeLanguage(language.name)">
                <i [class]="language.icon"></i>
                {{ language.displayName }}
              </a>
            </li>
          </ul>
        </li>

        <li
          *ngIf="userManagementService.notificationEnabled && layoutService.showNotificationsButton"
          headerNotifications
          class="m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-right m-dropdown--mobile-full-width"
          data-dropdown-toggle="click"
          data-dropdown-persistent="true"
          id="header_notification_bar"
        ></li>

        <li
          *ngIf="isChatEnabled && !isChatConnected && layoutService.showChatButton"
          class="m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-center m-dropdown--mobile-full-width"
        >
          <a href="javascript:;" class="m-nav__link">
            <span class="m-nav__link-icon">
              <img
                *ngIf="!isChatConnected"
                src="./assets/common/images/loading.gif"
                style="width: 23px"
                [tooltip]="ls.l('ChatIsConnecting')"
                placement="left"
              />
            </span>
          </a>
        </li>
        <li
          *ngIf="isChatEnabled && isChatConnected && layoutService.showChatButton"
          (click)="quickSideBarChat.toggle()"
          class="m-nav__item m-topbar__notifications m-topbar__notifications--img m-dropdown m-dropdown--large m-dropdown--header-bg-fill m-dropdown--arrow m-dropdown--align-center m-dropdown--mobile-full-width"
        >
          <a href="javascript:;" class="m-nav__link m-dropdown__toggle">
            <span class="m-nav__link-icon">
              <img
                [src]="
                  './assets/common/icons/feedback' +
                  (customLayoutType ? '-' + customLayoutType : '') +
                  '.svg'
                "
              />
            </span>
            <span
              class="m-badge m-badge--danger"
              [ngClass]="{ 'd-none': !unreadChatMessageCount }"
              id="UnreadChatMessageCount"
              >{{ unreadChatMessageCount }}</span
            >
          </a>
        </li>

        <user-dropdown-menu
          *ngIf="layoutService.showUserProfileMenu"
          [subtitle]="userCompany$ | async"
          [dropdownMenuItems]="dropdownMenuItems"
        >
        </user-dropdown-menu>
      </user-management-list>
      <top-bar></top-bar>
    </ng-container>
  </div>
</div>
