<div class="pipeline-wrapper">
    <div *ngFor="let stage of stages; let i = index;" class="column column{{stage.index + ' ' + (stage.sortOrder && (stage.sortOrder > 0 ? 'positive': 'negative') || 'focused')}} color-{{stage.color}}">
        <div class="column-title">
            <span>{{stage.name}}</span><div>{{'(' + (stage?.total || 0) + ')'}}</div><button class="edit-button"><img src="/assets/common/icons/edit-icon.svg" alt="Edit"></button>
        </div>
        <div class="column-items" [ngClass]="{'drag-allowed': stage?.dragAllowed}" [dragula]="dragulaName" [dragulaModel]="stage?.leads" accessKey="{{stage?.name}}">
            <ng-container *ngFor="let lead of stage.leads">
                  <div class="card" [ngClass]="{locked: lead?.locked}" [accessKey]="lead?.Id">
                      <div class="container-fluid">
                          <div class="row">
                              <div class="text-right pipeline-photo-wrap">
                                  <a [routerLink]="['../client', lead.CustomerId, 'lead', lead.Id, 'contact-information']" [queryParams]="leadDetailQueryParams"><img [src]="getPhoto(lead?.Photo, lead?.Gender)" alt="{{lead?.FullName}}" class="img-responsive img-circle" width="40"></a>
                              </div>
                              <div class="full-name">
                                  <a [routerLink]="['../client', lead.CustomerId, 'lead', lead.Id, 'contact-information']" [queryParams]="leadDetailQueryParams">{{lead?.FullName}}</a>
                                  <div class="company-name">
                                      <a [routerLink]="['../client', lead.CustomerId, 'lead', lead.Id, 'contact-information']" [queryParams]="leadDetailQueryParams">{{ lead?.CompanyName || 'no company'}}</a>
                                  </div>
                              </div>
                          </div>
                          <div class="row">
                              <div class="days-ago">
                                  <img src="/assets/common/icons/clock-circle.svg" class="img-responsive"><span>{{ dateOf(lead?.CreationTime) | timeAgo }}</span>
                              </div>
                          </div>
                          <!-- div class="row item-data">
                              <div class="text-right">
                                  <span class="related-contact">{{l('PipeLine_RelatedContacts', [1])}}</span>
                                  <img src="/assets/common/icons/phone.svg" class="phone">
                                  <span class="delimiter"></span>
                                  <img src="/assets/common/icons/email.svg" class="email">
                              </div>
                          </div -->
                      </div>
                  </div>
            </ng-container>
            <span class="load-more" [hidden]="!stage.leads.length || stage.total <= stage.leads.length" (click)="loadMore(i)"><img src="/assets/common/icons/arrow-down.svg"></span>
        </div>
    </div>
</div>
