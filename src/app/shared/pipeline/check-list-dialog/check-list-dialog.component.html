<div id="dragcontainer"></div>
<h2 mat-dialog-title>{{ls.l('ChecklistSettings') + ' (' + dialogData.stage.name + ')'}}<span class="close" (click)="close()"></span></h2>
<div mat-dialog-content>
    <p>{{ls.l('ChecklistDescription')}}</p>
    <hr>
    <dx-data-grid 
        [dataSource]="dataSource"
        [showColumnHeaders]="false"
        [showColumnLines]="false">
        <dxo-row-dragging [allowReordering]="true" dropFeedbackMode="push" [onReorder]="onReorder" container="#dragcontainer"></dxo-row-dragging>
        <dxi-column dataField="id" dataType="number" [visible]="false"></dxi-column>
        <dxi-column dataField="color" dataType="string" cellTemplate="colorCell" width="30px"></dxi-column>
        <dxi-column dataField="sortOrder" dataType="number" [visible]="false" sortOrder="asc"></dxi-column>
        <dxi-column dataField="name" dataType="string" cellTemplate="nameCell"></dxi-column>
        <div *dxTemplate="let cell of 'colorCell'">
            <dx-check-box 
                width="20px"
                [disabled]="true" 
                [value]="false">
            </dx-check-box>
        </div>
        <div *dxTemplate="let cell of 'nameCell'" class="inplace-container" (keydown)="$event.stopPropagation()">
            <inplace-edit
                [id]="cell.value"
                [maxLength]="50"
                [value]="cell.value"
                [isDeleteEnabled]="true"
                [isEditModeEnabled]="!cell.value"
                [showRefreshButton]="cell.id"
                [lDeleteConfirmTitle]="ls.l('ChecklistDeleteWarningTitle')"
                [lDeleteConfirmMessage]="ls.l('ChecklistDeleteWarningMessage')"
                [lEntityName]="ls.l('Name')"
                [editPlaceholder]="ls.l('Name')"
                [showInlineEditButton]="true"
                [validationRules]="validationRules"
                (itemDeleted)="onDelete($event, cell)"
                (valueChanged)="onChanged($event, cell)">
            </inplace-edit>
        </div>
    </dx-data-grid>
</div>
<div mat-dialog-actions>
    <button mat-button class="btn-layout" (click)="addNewRecord()">{{ls.l('AddNew')}}</button>
</div>