<div [@routerTransition]
     class="login-wraper entrance-page__form entrance-page__form-password">
    <div class="m-login__signin entrance-page__form--forgotpass">
        <h1 class="entrance-page__title">
            {{ls.l("ChangePassword")}}
        </h1>
        <p class="entrance-page__subtitle">
            {{ls.l("PleaseEnterYourNewPassword")}}
        </p>
        <form #resetPassForm="ngForm"
              (ngSubmit)="save()"
              class="m-login__form"
              method="post">
            <div class="entrance-page__form-password">
                <div class="input-wrap">
                    <input #Password="ngModel"
                           (focus)="onFocus()"
                           [(ngModel)]="model.password"
                           [placeholder]="ls.l('Password')"
                           [requireDigit]="passwordComplexitySetting.requireDigit"
                           [requireLowercase]="passwordComplexitySetting.requireLowercase"
                           [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"
                           [requireUppercase]="passwordComplexitySetting.requireUppercase"
                           [requiredLength]="passwordComplexitySetting.requiredLength"
                           class="entrance-page__form-input entrance-page__form-input--password"
                           name="Password"
                           required
                           reverse="true"
                           type="password"
                           validateEqual="PasswordRepeat">
                    <a (click)="togglePasswordVisibe($event, Password)"
                       class="show-password"></a>
                </div>
            </div>

            <div class="entrance-page__form-password">
                <div class="input-wrap">
                    <input #PasswordRepeat="ngModel"
                           #passwordRepeat
                           (focus)="onFocus()"
                           [ngModel]="model.passwordRepeat"
                           [requireDigit]="passwordComplexitySetting.requireDigit"
                           [requireLowercase]="passwordComplexitySetting.requireLowercase"
                           [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"
                           [requireUppercase]="passwordComplexitySetting.requireUppercase"
                           [requiredLength]="passwordComplexitySetting.requiredLength"
                           class="entrance-page__form-input entrance-page__form-input--password"
                           name="PasswordRepeat"
                           placeholder="{{ls.l('PasswordRepeat')}}"
                           required
                           reverse="false"
                           type="password"
                           validateEqual="Password">
                    <a (click)="togglePasswordVisibe($event, PasswordRepeat)"
                       class="show-password"></a>
                </div>
            </div>

            <ng-container
                *ngIf="(Password.errors || PasswordRepeat.errors) && (Password.value || PasswordRepeat.value)">
                <div [class.is-active]="showPasswordComplexity"
                     [style.min-height.px]="showPasswordComplexity ? minHeight : 0"
                     class="entrance-page__form-validator"
                     id="message">
                    <div class="message-inner">
                        <p *ngIf="passwordComplexitySetting.requireLowercase"
                           [ngClass]="{
                            'invalid': (Password?.errors && Password?.errors?.requireLowercase) || (PasswordRepeat?.errors && PasswordRepeat?.errors?.requireLowercase),
                            'valid': !Password?.errors?.requireLowercase && !PasswordRepeat?.errors?.requireLowercase
                           }"
                           class="validator-rule"
                           id="letter">
                            {{ls.l('PasswordComplexity_RequireLowercase_Hint')}}
                        </p>
                        <p *ngIf="passwordComplexitySetting.requireUppercase"
                           [ngClass]="{
                            'invalid': (Password?.errors && Password?.errors?.requireUppercase) || (PasswordRepeat?.errors && PasswordRepeat?.errors?.requireUppercase),
                            'valid': !Password?.errors?.requireUppercase && !PasswordRepeat?.errors?.requireUppercase
                           }"
                           class="validator-rule"
                           id="capital">
                            {{ls.l('PasswordComplexity_RequireUppercase_Hint')}}
                        </p>
                        <p *ngIf="passwordComplexitySetting.requireDigit"
                           [ngClass]="{
                            'invalid': (Password?.errors && Password?.errors?.requireDigit) || (PasswordRepeat?.errors && PasswordRepeat?.errors?.requireDigit),
                            'valid': !Password?.errors?.requireDigit && !PasswordRepeat?.errors?.requireDigit
                           }"
                           class="validator-rule"
                           id="number">
                            {{ls.l('PasswordComplexity_RequireDigit_Hint')}}
                        </p>
                        <p *ngIf="passwordComplexitySetting.requiredLength"
                           [ngClass]="{
                            'invalid': (Password?.errors && Password?.errors?.requiredLength) || (PasswordRepeat?.errors && PasswordRepeat?.errors?.requiredLength),
                            'valid': !Password?.errors?.requiredLength && !PasswordRepeat?.errors?.requiredLength
                           }"
                           class="validator-rule"
                           id="length">
                            {{ls.l('PasswordComplexity_RequiredLength_Hint', passwordComplexitySetting.requiredLength)}}
                        </p>
                        <p *ngIf="passwordComplexitySetting.requireNonAlphanumeric"
                           [ngClass]="{
                            'invalid': (Password?.errors && Password?.errors?.requireNonAlphanumeric) || (PasswordRepeat?.errors && PasswordRepeat?.errors?.requireNonAlphanumeric),
                            'valid': !Password?.errors?.requireNonAlphanumeric && !PasswordRepeat?.errors?.requireNonAlphanumeric
                            }"
                           class="validator-rule"
                           id="special">
                            {{ls.l('PasswordComplexity_RequireNonAlphanumeric_Hint')}}
                        </p>
                        <p [ngClass]="{
                            'invalid': !PasswordRepeat.valid,
                            'valid': PasswordRepeat.valid
                           }"
                           class="validator-rule"
                           id="match">
                            {{ls.l('PasswordsDontMatch')}}
                        </p>
                    </div>
                </div>
            </ng-container>


            <input [value]="ls.l('Submit')"
                   class="entrance-page__form-button entrance-page__form-button--forgot"
                   type="submit">
            <br>
            <div class="m-login__form-action">
                <a class="entrance-page__forgot-back"
                   routerLink="/account/login">
                    {{ls.l('Go back to the sign in page')}}
                </a>
            </div>
        </form>
    </div>
</div>