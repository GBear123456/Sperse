<div [@routerTransition] class="login-wraper d-flex align-self-center">
    <div class="login-box">
        <div class="colored-line">
            <span class="bg-blue"></span>
            <span class="bg-red"></span>
            <span class="bg-yellow"></span>
            <span class="bg-green"></span>
        </div>
        <div class="m-login__signin">
            <div *ngIf="!isRequestSent; else verification">
                <div class="m-login__head">
                    <h3 class="m-login__title">
                        {{ls.l("ForgotPassword")}}
                    </h3>
                </div>
                <form class="m-login__form m-form forget-form" #forgotPassForm="ngForm" method="post" novalidate (ngSubmit)="sendRequest()">
                    <div class="success" *ngIf="isEmailSent; else defaultForm">
                        <p>{{ls.l('PasswordResetMailSentMessage')}}</p>
                        <img src="assets/common/images/bank-code/success-check.png">
                    </div>
                    <ng-template #defaultForm>
                        <p>
                            {{ls.l("SendPasswordResetLink_Information")}}
                        </p>
                        <div class="form-group m-form__group icon-input">
                            <input #emailAddressInput="ngModel" [(ngModel)]="model.emailAddress"
                                   [ngModelOptions]="{updateOn: 'change'}" autoFocus class="form-control placeholder-no-fix"
                                   type="text" autocomplete="off" placeholder="{{ls.l('EmailAddress')}} *" name="emailAddress"
                                   required maxlength="256" [pattern]="emailRegex" email />
                            <validation-messages [formCtrl]="emailAddressInput"
                                                 [errorDefs]="[{pattern: ls.l('InvalidEmailAddress')}]"></validation-messages>
                        </div>
                        <div class="m-login__form-action">
                            <button type="submit" class="btn btn-primary m-btn m-btn--pill m-btn--custom m-btn--air"
                                    [ngClass]="{disabled: !form?.valid}"
                                    [buttonBusy]="saving"
                                    [busyText]="ls.l('SavingWithThreeDot')">
                                {{ls.l("Send Email Verification")}}
                            </button>
                            <button [disabled]="saving"
                                    routerLink="/account/login"
                                    [queryParams]="{extlogin: isExtLogin}"
                                    type="button" class="btn btn-link btn-back">
                                {{ls.l("Go Back")}}
                            </button>
                        </div>
                    </ng-template>
                </form>
            </div>
            <ng-template #verification>
                <bank-code-login-verification [emailAddress]="model.emailAddress"
                                              (onCodeRefresh)="sendRequest(true)">
                </bank-code-login-verification>
            </ng-template>
        </div>
        <div class="colored-line">
            <span class="bg-blue"></span>
            <span class="bg-red"></span>
            <span class="bg-yellow"></span>
            <span class="bg-green"></span>
        </div>
    </div>
</div>
