<div class="wizard-wrap">
    <!-- div class="top-bar">
        <div class="content-wrap">
            <div class="logo">
                <a routerLink="/" target="_self">
                    <img *ngIf="!appSession.appearanceConfig || !appSession.appearanceConfig.logoId" src="assets/common/images/sperse-logo.png" alt="logo" width="200" />
                    <img *ngIf="appSession.appearanceConfig && appSession.appearanceConfig.logoId" [src]="remoteServiceBaseUrl + '/api/TenantCustomization/GetLogo?logoId=' + appSession.appearanceConfig.logoId" alt="logo" width="200" />
                </a>
            </div>
            <p>Need help? <a href="/contact-us">Let us know</a></p>
        </div>
    </div -->
    <wizard id="wizard">
        <wizard-step>
            <wizard-step-tab></wizard-step-tab>
            <img src="assets/landing/about-yourself.svg" alt="About" class="step-icon" width="116">
            <h2 class="step-title">{{ls.l('TellUsAboutYourself')}}</h2>
            <div class="form">
                <form id="memberInfo">
                    <dx-validation-group>
                        <div class="row">
                            <div class="dx-fieldset col-md-6">
                                <div class="dx-field">
                                    <div class="dx-field-label">{{ls.l('WhatIsYourFullName')}}</div>
                                    <div class="firstName">
                                        <dx-text-box name="firstName"
                                                     [placeholder]="ls.l('FirstName')"
                                                     [(value)]="model.name"
                                                     (keydown)="validateName($event)">
                                            <dx-validator>
                                                <dxi-validation-rule type="required"
                                                                     message="{{ls.l('NameIsRequired')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-text-box>
                                    </div>
                                    <div class="lastName">
                                        <dx-text-box name="lastName"
                                                     [placeholder]="ls.l('LastName')"
                                                     [(value)]="model.surname"
                                                     (keydown)="validateName($event)">
                                            <dx-validator>
                                                <dxi-validation-rule type="required"
                                                                     message="{{ls.l('SurnameIsRequired')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-text-box>
                                    </div>
                                </div>
                                <div class="dx-field email">
                                    <div class="dx-field-label">{{ls.l('YourEmailAddress')}}</div>
                                    <div class="dx-field-value">
                                        <dx-text-box name="email"
                                                     [placeholder]="ls.l('Email')"
                                                     [(value)]="model.email"
                                                     [readOnly]="isExistingUser">
                                            <dx-validator>
                                                <dxi-validation-rule type="required"
                                                                     message="{{ls.l('EmailIsRequired')}}."></dxi-validation-rule>
                                                <dxi-validation-rule type="pattern" [pattern]="emailRegEx"
                                                                     message="{{ls.l('EmailIsNotValid')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-text-box>
                                    </div>
                                </div>
                                <div class="dx-field">
                                    <div class="dx-field-label">{{ls.l('YourPhone')}}</div>
                                    <div class="dx-field-value">
                                        <dx-text-box name="phone"
                                                     [placeholder]="ls.l('Phone')"
                                                     maskInvalidMessage="{{ls.l('PhoneValidationError')}}."
                                                     [(value)]="model.phone"
                                                     (onFocusOut)="inputStatusesService.blurInput($event)"
                                                     (onFocusIn)="inputStatusesService.focusInput($event)">
                                            <dx-validator>
                                                <dxi-validation-rule type="required" message="{{ls.l('PhoneIsRequired')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-text-box>
                                    </div>
                                </div>
                            </div>
                            <div class="dx-fieldset col-md-6">
                                <div class="dx-field">
                                    <div class="dx-field-label">{{ls.l('WhatIsYourGender')}}</div>
                                    <div class="dx-field-value">
                                        <dx-radio-group [dataSource]="gender"
                                                        displayExpr="text"
                                                        valueExpr="value"
                                                        layout="horizontal"
                                                        name="gender"
                                                        [(value)]="model.gender">
                                            <dx-validator>
                                                <dxi-validation-rule type="required" message="{{ls.l('GenderIsRequired')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-radio-group>
                                    </div>
                                </div>
                                <div class="dx-field">
                                    <div class="dx-field-label">{{ls.l('DateOfBirth')}}</div>
                                    <div class="dx-field-value">
                                        <dx-date-box [invalidDateMessage]="ls.l('InvalidDateOfBirth')"
                                                     name="dob"
                                                     type="date"
                                                     placeholder="mm/dd/yyyy"
                                                     [max]="minDate"
                                                     [min]="maxDate"
                                                     [(value)]="model.doB"
                                                     (onKeyDown)="validateDateBirth($event)"
                                                     (onFocusIn)="focusDateBirth($event)">
                                            <dx-validator>
                                                <dxi-validation-rule type="required"
                                                                     message="{{ls.l('DateOfBirthIsRequired')}}."></dxi-validation-rule>
                                                <dxi-validation-rule type="range" [max]="minAge"
                                                                     message="{{ls.l('DateOfBirth18YearsError')}}."></dxi-validation-rule>
                                                <dxi-validation-rule type="range" [min]="maxAge"
                                                                     message="{{ls.l('DateOfBirth99YearsError')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-date-box>
                                    </div>
                                </div>
                                <div class="dx-field">
                                    <div class="dx-field-label">SSN</div>
                                    <div class="dx-field-value">
                                        <dx-text-box name="ssn"
                                                     [placeholder]="ls.l('SSN')"
                                                     [maskInvalidMessage]="ls.l('SSNFormatError')"
                                                     [(value)]="model.ssn"
                                                     (onFocusIn)="inputStatusesService.focusInput($event)"
                                                     (onFocusOut)="inputStatusesService.blurInput($event)">
                                            <dx-validator>
                                                <dxi-validation-rule type="required" message="{{ls.l('SSNIsRequired')}}."></dxi-validation-rule>
                                            </dx-validator>
                                        </dx-text-box>
                                    </div>
                                </div>
                                <div class="dx-field custom-radio-2-btn">
                                    <div class="dx-field-label">{{ls.l('AreYouUsCitizen')}}</div>
                                    <div class="dx-field-value">
                                        <dx-radio-group [dataSource]="radioGroupCitizen"
                                                        displayExpr="text"
                                                        valueExpr="status"
                                                        layout="horizontal"
                                                        name="isUSCitizen"
                                                        [(value)]="model.isUSCitizen">
                                        </dx-radio-group>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <dx-validation-summary class="summary"></dx-validation-summary>
                        <dx-button class="button"
                                   [text]="ls.l('Next')"
                                   icon="assets/landing/right-arrow.svg"
                                   type="submit"
                                   rtlEnabled="true"
                                   [disabled]="checkButtonDisabled('memberInfo')"
                                   (onClick)="memberInfoSubmit($event)">
                        </dx-button>
                    </dx-validation-group>
                </form>
            </div>
        </wizard-step>
        <wizard-step>
            <wizard-step-tab></wizard-step-tab>
            <form id="billingInfo">
                <payment-info [paymentAuthorizationRequired]="paymentAuthorizationRequired"></payment-info>
                <div *ngIf="paymentResult" class="base-commerce-validation">
                    <ng-container *ngFor="let item of paymentResult.errors">
                        <div class="dx-validationsummary-item">
                            <div class="dx-item-content dx-validationsummary-item-content">{{ item }}</div>
                        </div>
                    </ng-container>
                </div>
                <button class="button btn-back" (click)="previousStep()" type="button">
                    <img src="assets/landing/left-arrow-icon.svg" [alt]="ls.l('Back')">{{ls.l("Back")}}
                </button>
                <dx-button class="button"
                           [text]="ls.l('Next')"
                           icon="assets/landing/right-arrow.svg"
                           [rtlEnabled]="true"
                           [disabled]="checkButtonDisabled('billingInfo')"
                           (onClick)="billingInfoSubmit($event)">
                </dx-button>
            </form>
        </wizard-step>
        <wizard-step>
            <wizard-step-tab></wizard-step-tab>
            <img src="assets/landing/about-yourself.svg" alt="About" class="step-icon" width="116">
            <h2 class="step-title">{{ls.l('AddressInfo')}}</h2>
            <div class="form">
                <form id="addressInfo">
                    <dx-validation-group name="addressValidationGroup">
                        <div class="dx-fieldset with-bg">
                            <div class="row dx-field">
                                <div class="col-sm-12 with-icon fullAddress">
                                    <input *ngIf="!googleAutoComplete" type="text"
                                           name="Address"
                                           [placeholder]="ls.l('AddressPlaceholder')"
                                           [(ngModel)]="model.address.streetAddress"
                                           class="dx-texteditor-input" />
                                    <input *ngIf="googleAutoComplete"
                                           #addressInput
                                           type="text"
                                           name="Address"
                                           [placeholder]="ls.l('AddressPlaceholder')"
                                           [(ngModel)]="model.address.streetAddress"
                                           class="dx-texteditor-input"
                                           [options]="options"
                                           (onAddressChange)="onAddressChanged($event)"
                                           ngx-google-places-autocomplete />
                                </div>
                            </div>
                            <div class="dx-field row">
                                <div class="col-sm-5">
                                    <dx-text-box name="city"
                                                 maxLength="50"
                                                 [placeholder]="ls.l('City')"
                                                 [(value)]="model.address.city">
                                        <dx-validator>
                                            <dxi-validation-rule type="required"
                                                                 [message]="ls.l('CityRequired')"></dxi-validation-rule>
                                        </dx-validator>
                                    </dx-text-box>
                                </div>
                                <div class="col-sm-3">
                                    <dx-select-box [dataSource]="states"
                                                   displayExpr="code"
                                                   valueExpr="code"
                                                   name="billingStateCode"
                                                   [searchEnabled]="true"
                                                   [(value)]="model.address.stateId"
                                                   fieldTemplate="field">
                                        <div *dxTemplate="let data of 'field'">
                                            <div class="custom-item">
                                                <dx-text-box class="state"
                                                             [value]="data?.code"
                                                             placeholder="State"
                                                             [readOnly]="true">
                                                </dx-text-box>
                                            </div>
                                        </div>
                                        <dx-validator>
                                            <dxi-validation-rule type="required"
                                                                 [message]="ls.l('StateRequired')">
                                            </dxi-validation-rule>
                                        </dx-validator>
                                    </dx-select-box>
                                </div>
                                <div class="col-sm-4">
                                    <dx-text-box name="zipCode"
                                                 class="with-icon zipCode"
                                                 maxLength="5"
                                                 [placeholder]="ls.l('Zipcode')"
                                                 [(value)]="model.address.zip"
                                                 (onFocusIn)="inputStatusesService.focusInput($event)"
                                                 (onFocusOut)="inputStatusesService.blurInput($event)">
                                        <dx-validator>
                                            <dxi-validation-rule type="required"
                                                                 [message]="ls.l('ZipIsRequired')">
                                            </dxi-validation-rule>
                                        </dx-validator>
                                    </dx-text-box>
                                </div>
                            </div>
                        </div>
                        <dx-validation-summary class="summary"></dx-validation-summary>
                        <button class="button btn-back" (click)="previousStep()" type="button">
                            <img src="assets/landing/left-arrow-icon.svg" [alt]="ls.l('Back')">{{ls.l("Back")}}
                        </button>
                        <dx-button class="button"
                                   [text]="ls.l('Next')"
                                   icon="assets/landing/right-arrow.svg"
                                   [rtlEnabled]="true"
                                   [disabled]="checkButtonDisabled('addressInfo')"
                                   (onClick)="addressInfoSubmit($event)">
                        </dx-button>
                    </dx-validation-group>
                </form>
            </div>
        </wizard-step>
        <wizard-step>
            <wizard-step-tab></wizard-step-tab>
            <img src="assets/landing/confirm-reg-icon.svg" alt="Payment" class="step-icon" width="116">
            <h2 class="step-title">Confirm your login settings</h2>
            <form novalidate (ngSubmit)="registerMemberSubmit()" #registerMember="ngForm" autocomplete="off" class="last-step">
                <div class="form-group row">
                    <label for="email" class="col-sm-2">Current email address</label>
                    <div class="col-sm-5">
                        <input type="text" class="form-control" id="email" name="email" email [(ngModel)]="model.email">
                        <div class="layout-checkbox">
                            <label class="t-checkbox">
                                <input class="form-control" [(ngModel)]="loginService.authenticateModel.rememberClient" type="checkbox" name="rememberMe" id="rememberMe" />
                                {{ls.l("RememberMe")}}
                                <span></span>
                            </label>
                        </div>
                    </div>
                    <div class="col-sm-5 info-card">
                        <p>
                            Please be sure this is your correct email address. You will receive the verification link
                            within 24 hours to have continued access your account.
                        </p>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="password" class="col-sm-2">Choose your account password</label>
                    <div class="col-sm-5">
                        <input [type]="showPassword ? 'text' : 'password'" class="form-control" #passwordInput="ngModel" name="passwordInput" [(ngModel)]="model.password" (ngModelChange)="UpdatePasswordStrength($event)"
                               [requireDigit]="passwordComplexitySetting.requireDigit" [requireLowercase]="passwordComplexitySetting.requireLowercase"
                               [requireUppercase]="passwordComplexitySetting.requireUppercase" [requireNonAlphanumeric]="passwordComplexitySetting.requireNonAlphanumeric"
                               [requiredLength]="passwordComplexitySetting.requiredLength"
                               required>
                        <a class="toggle-password" (click)="toggleShowPassword($event)">{{ls.l('ShowPassword')}}</a>
                        <span class="password-strength pull-right">Password strength: <span class="{{passwordComplexityWord}}">{{ls.l(passwordComplexityWord)}}</span></span>
                    </div>
                    <div class="col-sm-5 info-card">
                        <p>
                            Choose a password to access your account. The password must be at least {{passwordComplexitySetting.requiredLength}} characters. It
                            should be something you’ll remember, but difficult for someone else to guess
                        </p>
                        <ul *ngIf="!passwordInput.valid && !passwordInput.pristine" class="fa-ul help-block password-Complexity-Block">
                            <li [hidden]="!passwordComplexitySetting.requireDigit" [ngClass]="checkPasswordRule(passwordInput, 'requireDigit')">
                                {{ls.l("PasswordComplexity_RequireDigit_Hint")}}
                            </li>
                            <li [hidden]="!passwordComplexitySetting.requireLowercase" [ngClass]="checkPasswordRule(passwordInput, 'requireLowercase')">
                                {{ls.l("PasswordComplexity_RequireLowercase_Hint")}}
                            </li>
                            <li [hidden]="!passwordComplexitySetting.requireUppercase" [ngClass]="checkPasswordRule(passwordInput, 'requireUppercase')">
                                {{ls.l("PasswordComplexity_RequireUppercase_Hint")}}
                            </li>
                            <li [hidden]="!passwordComplexitySetting.requireNonAlphanumeric" [ngClass]="checkPasswordRule(passwordInput, 'requireNonAlphanumeric')">
                                {{ls.l("PasswordComplexity_RequireNonAlphanumeric_Hint")}}
                            </li>
                            <li [ngClass]="checkPasswordRule(passwordInput, 'requiredLength')">
                                {{ls.l("PasswordComplexity_RequiredLength_Hint", passwordComplexitySetting.requiredLength)}}
                            </li>
                        </ul>
                    </div>
                </div>
                <button class="button btn-back" (click)="previousStep()" type="button">
                    <img src="assets/landing/left-arrow-icon.svg" alt="{{ls.l('Back')}}">{{ls.l("Back")}}
                </button>
                <button class="button" type="submit" [disabled]="!registerMember.valid || registrationInProgress">
                    {{ls.l("Next")}} <img src="assets/landing/right-arrow.svg" alt="arrow" width="16" class="btn-icon">
                </button>
            </form>
        </wizard-step>
    </wizard>
    <!-- footer></footer -->
</div>
