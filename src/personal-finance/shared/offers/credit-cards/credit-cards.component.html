<div class="container">
    <div class="header">
        <h1>Credit Cards</h1>
        <p class="description">There are hundreds of credit cards on the market, with their own advantages and disadvantages. Researching
            and comparing the best credit card offers takes a lot of work and time.</p>
    </div>

    <ng-container  *ngIf="(cardOffersList$ | async) as offers">
        <section class="cards" *ngIf="bestCreditCard || (filteredGroup && filteredGroup.length)">
            <div class="heading">
                <h2>To help you find the ideal card for you, the LendSpace team has assembled the</h2>
                <button *ngIf="bestCreditCard"
                        (click)="openOffers(bestCreditCard)"
                        class="best-cc-offers">
                    {{ls.l('OfferCollection_' + bestCreditCard.offerCollection)}} Offers for 2019!
                </button>
            </div>

            <ul class="row cards-list">
                <ng-container *ngFor="let cardOfferGroup of filteredGroup">
                    <li class="col-md-3 col-sm-4 cards-item" *ngIf="cardOfferGroup.offerCollection != 'Best'">
                        <a class="cards-item-wrap"
                           (click)="openOffers(cardOfferGroup)">
                            <img [src]="'./assets/common/images/pfm-cc/' + cardOfferGroup.offerCollection + '.svg'"
                                 [alt]="cardOfferGroup.name">
                            <h3>{{ls.l('OfferCollection_' + cardOfferGroup.offerCollection)}}</h3>
                        </a>
                    </li>
                </ng-container>
            </ul>
        </section>

        <section class="credit-score" *ngIf="bestCardsByScore && bestCardsByScore.length">
            <h2>Find the best cards for your credit score</h2>
            <div class="gradient"></div>
            <div class="credit-score-wrap">
                <ul class="credit-score-list row">
                    <li class="credit-score-item col-md-2 col-sm-3" *ngFor="let item of bestCardsByScore">
                        <a (click)="openOffers(item)">
                            {{ls.l('OfferCollection_' + item.offerCollection)}}
                        </a>
                    </li>
                </ul>
            </div>
        </section>

        <section class="results-by-category" #resultByCategory>
            <ng-container *ngIf="filteredGroup && filteredGroup.length">
                <h2>Top results by category</h2>

                <div class="row">
                    <div class="col-md-3 col-sm-4 offer-navigation">
                        <ul class="offer-navigation__list" #offerNavigationList>
                            <li class="offer-navigation__item" *ngFor="let menuItem of filteredGroup">
                                <a class="offer-navigation__link"
                                   [routerLink]="'/personal-finance/offers/credit-cards/home/' + menuItem.offerCollection"
                                   routerLinkActive="active">
                                    <img [src]="'./assets/common/images/pfm-cc/menu-' + menuItem.offerCollection + '.svg'"
                                         [alt]="menuItem.name" class="img-fluid offer-navigation__img">
                                    {{ls.l('OfferCollection_' + menuItem.offerCollection)}}
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-9 col-sm-8 offer-collection">
                        <div class="row" *ngIf="(cards && cards.length); else noCards">
                            <div class="w-100 mb-5">
                                <div class="col-12 text-center">
                                    <button class="best-cc-offers" (click)="openOffers(selectedOfferGroup)">
                                        View all cards in this category
                                    </button>
                                </div>
                            </div>

                            <div class="col-md-4 col-sm-6 card-item" *ngFor="let card of cards" (click)="openOffers(card)">
                                <div class="card-item__img--wrap">
                                    <img [src]="card.logoUrl" alt="Credit Card" class="card-item__img img-fluid">
                                </div>
                                <div class="card-item__bank">{{card.issuingBank}}</div>
                                <h3 class="card-item__card-name" title="{{card.name}}">{{card.name}}</h3>
                                <div class="card-item__rating row">
                                    <div class="stars col text-left">
                                        <stars-rating [currentRating]="card.overallRating" color="#f0d500"></stars-rating>
                                    </div>
                                    <!--<a class="card-item__reviews col text-right">765 reviews</a>-->
                                </div>

                                <div class="card-item__info">
                                    <div class="row" *ngFor="let param of ['annualFee', 'rewardsRate', 'introRewardsBonus', 'regularAPR']">
                                        <div class="text-left col-6">{{ ls.l('Offers_' + param) }}</div>
                                        <div class="text-right col-6" *ngIf="offersService.getParamDisplayValue(card[param]) as displayValue">
                                            <b [title]="displayValue">{{ displayValue }}</b>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="w-100 mt-5">
                                <div class="col-12 text-center">
                                    <button class="best-cc-offers" (click)="openOffers(selectedOfferGroup)">
                                        View all cards in this category
                                    </button>
                                </div>
                            </div>
                        </div>
                        <ng-template class="no-available-offers" #noCards>
                            <app-no-data></app-no-data>
                        </ng-template>
                    </div>
                </div>
            </ng-container>
        </section>

        <app-no-data *ngIf="!offers.length"></app-no-data>
    </ng-container>
</div>
